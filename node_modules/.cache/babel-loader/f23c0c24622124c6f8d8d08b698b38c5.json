{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar PdfJs = require('pdfjs-dist');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n['default'] = e;\n  return Object.freeze(n);\n}\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nvar PdfJs__namespace = /*#__PURE__*/_interopNamespace(PdfJs);\n\nvar AnnotationType;\n\n(function (AnnotationType) {\n  AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n  AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n  AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n  AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n  AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n  AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n  AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n  AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n  AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n  AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n  AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n  AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n  AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n  AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n  AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n  AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n  AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(AnnotationType || (AnnotationType = {}));\n\nvar AnnotationType$1 = AnnotationType;\nvar ThemeContext = React__default['default'].createContext({\n  prefixClass: 'rpv-core'\n});\n\nvar classNames = function (classes) {\n  var result = [];\n  Object.keys(classes).forEach(function (clazz) {\n    if (clazz && classes[clazz]) {\n      result.push(clazz);\n    }\n  });\n  return result.join(' ');\n};\n\nvar Button = function (_a) {\n  var _b;\n\n  var children = _a.children,\n      _c = _a.isSelected,\n      isSelected = _c === void 0 ? false : _c,\n      onClick = _a.onClick;\n  var theme = React.useContext(ThemeContext);\n  return React__default['default'].createElement(\"button\", {\n    className: classNames((_b = {}, _b[theme.prefixClass + \"-button\"] = true, _b[theme.prefixClass + \"-button-selected\"] = isSelected, _b)),\n    onClick: onClick\n  }, children);\n};\n\nvar Menu = function (_a) {\n  var children = _a.children;\n  var theme = React.useContext(ThemeContext);\n  return React__default['default'].createElement(\"ul\", {\n    className: theme.prefixClass + \"-menu\"\n  }, children);\n};\n\nvar MenuDivider = function () {\n  var theme = React.useContext(ThemeContext);\n  return React__default['default'].createElement(\"li\", {\n    className: theme.prefixClass + \"-menu-divider\"\n  });\n};\n\nvar Icon = function (_a) {\n  var children = _a.children,\n      _b = _a.size,\n      size = _b === void 0 ? 24 : _b;\n  var theme = React.useContext(ThemeContext);\n  var width = (size || 24) + \"px\";\n  return React__default['default'].createElement(\"svg\", {\n    className: theme.prefixClass + \"-icon\",\n    height: width,\n    viewBox: \"0 0 24 24\",\n    width: width\n  }, children);\n};\n\nvar CheckIcon = function () {\n  return React__default['default'].createElement(Icon, {\n    size: 16\n  }, React__default['default'].createElement(\"path\", {\n    d: \"M23.5,0.499l-16.5,23l-6.5-6.5\"\n  }));\n};\n\nvar MenuItem = function (_a) {\n  var _b = _a.checked,\n      checked = _b === void 0 ? false : _b,\n      children = _a.children,\n      _c = _a.icon,\n      icon = _c === void 0 ? null : _c,\n      onClick = _a.onClick;\n  var theme = React.useContext(ThemeContext);\n  return React__default['default'].createElement(\"li\", {\n    className: theme.prefixClass + \"-menu-item\",\n    onClick: onClick\n  }, React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-menu-item-icon\"\n  }, icon), React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-menu-item-label\"\n  }, children), React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-menu-item-check\"\n  }, checked && React__default['default'].createElement(CheckIcon, null)));\n};\n\nvar PrimaryButton = function (_a) {\n  var children = _a.children,\n      onClick = _a.onClick;\n  var theme = React.useContext(ThemeContext);\n  return React__default['default'].createElement(\"button\", {\n    className: theme.prefixClass + \"-primary-button\",\n    onClick: onClick\n  }, children);\n};\n\nvar ProgressBar = function (_a) {\n  var progress = _a.progress;\n  var theme = React.useContext(ThemeContext);\n  return React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-progress-bar\"\n  }, React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-progress-bar-inner\",\n    style: {\n      width: progress + \"%\"\n    }\n  }, progress, \"%\"));\n};\n\nvar Separator = function () {\n  var theme = React.useContext(ThemeContext);\n  return React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-separator\"\n  });\n};\n\nvar Spinner = function () {\n  var theme = React.useContext(ThemeContext);\n  return React__default['default'].createElement(\"svg\", {\n    className: theme.prefixClass + \"-spinner\",\n    width: \"64px\",\n    height: \"64px\",\n    viewBox: \"0 0 32 32\"\n  }, React__default['default'].createElement(\"circle\", {\n    className: theme.prefixClass + \"-spinner-circle\",\n    cx: \"16\",\n    cy: \"16\",\n    r: \"12\",\n    strokeDasharray: Math.PI * 2 * 9\n  }));\n};\n\nvar Observer = function (_a) {\n  var children = _a.children,\n      threshold = _a.threshold,\n      onVisibilityChanged = _a.onVisibilityChanged;\n  var containerRef = React.useRef(null);\n  React.useLayoutEffect(function () {\n    var io = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        var isVisible = entry.isIntersecting;\n        var ratio = entry.intersectionRatio;\n        onVisibilityChanged({\n          isVisible: isVisible,\n          ratio: ratio\n        });\n      });\n    }, {\n      threshold: threshold || 0\n    });\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    io.observe(container);\n    return function () {\n      io.unobserve(container);\n    };\n  }, []);\n  return React__default['default'].createElement(\"div\", {\n    ref: containerRef\n  }, children);\n};\n\nvar LocalizationContext = React__default['default'].createContext({});\nvar core = {\n  askingPassword: {\n    requirePasswordToOpen: \"This document requires a password to open\",\n    submit: \"Submit\"\n  },\n  wrongPassword: {\n    submit: \"Submit\",\n    tryAgain: \"The password is wrong. Please try again\"\n  }\n};\nvar enUs = {\n  core: core\n};\n\nvar LocalizationProvider = function (_a) {\n  var children = _a.children,\n      localization = _a.localization;\n  var defaultL10n = enUs;\n\n  var _b = React.useState(localization || defaultL10n),\n      l10nData = _b[0],\n      setL10nData = _b[1];\n\n  var setLocalization = function (l10n) {\n    return setL10nData(l10n);\n  };\n\n  return React__default['default'].createElement(LocalizationContext.Provider, {\n    value: l10nData\n  }, children(setLocalization));\n};\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n  var clickHandler = function (e) {\n    var target = targetRef.current;\n\n    if (target && !target.contains(e.target)) {\n      onClickOutside();\n    }\n  };\n\n  React.useEffect(function () {\n    if (!closeOnClickOutside) {\n      return;\n    }\n\n    document.addEventListener('click', clickHandler);\n    return function () {\n      document.removeEventListener('click', clickHandler);\n    };\n  }, []);\n};\n\nvar useKeyUp = function (targetKeyCode, handler) {\n  var keyUpHandler = function (e) {\n    e.keyCode === targetKeyCode && handler();\n  };\n\n  React.useEffect(function () {\n    document.addEventListener('keyup', keyUpHandler);\n    return function () {\n      document.removeEventListener('keyup', keyUpHandler);\n    };\n  }, []);\n};\n\nvar useLockScroll = function () {\n  React.useEffect(function () {\n    var originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = 'hidden';\n    return function () {\n      document.body.style.overflow = originalStyle;\n    };\n  }, []);\n};\n\nvar ModalBody = function (_a) {\n  var children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      onToggle = _a.onToggle;\n  var theme = React.useContext(ThemeContext);\n  var contentRef = React.createRef();\n  useLockScroll();\n  useKeyUp(27, function () {\n    return closeOnEscape && onToggle();\n  });\n  useClickOutside(closeOnClickOutside, contentRef, onToggle);\n  return React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-modal-body\",\n    ref: contentRef\n  }, children);\n};\n\nvar ModalOverlay = function (_a) {\n  var children = _a.children;\n  var theme = React.useContext(ThemeContext);\n  return React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-modal-overlay\"\n  }, children);\n};\n\nvar ToggleStatus;\n\n(function (ToggleStatus) {\n  ToggleStatus[\"Close\"] = \"Close\";\n  ToggleStatus[\"Open\"] = \"Open\";\n  ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(ToggleStatus || (ToggleStatus = {}));\n\nvar useToggle = function () {\n  var _a = React.useState(false),\n      opened = _a[0],\n      setOpened = _a[1];\n\n  var toggle = function (status) {\n    switch (status) {\n      case ToggleStatus.Close:\n        setOpened(false);\n        break;\n\n      case ToggleStatus.Open:\n        setOpened(true);\n        break;\n\n      case ToggleStatus.Toggle:\n      default:\n        setOpened(function (isOpened) {\n          return !isOpened;\n        });\n        break;\n    }\n  };\n\n  return {\n    opened: opened,\n    toggle: toggle\n  };\n};\n\nvar Portal = function (_a) {\n  var content = _a.content,\n      target = _a.target;\n\n  var _b = useToggle(),\n      opened = _b.opened,\n      toggle = _b.toggle;\n\n  return React__default['default'].createElement(React__default['default'].Fragment, null, target(toggle, opened), opened && content(toggle));\n};\n\nvar Modal = function (_a) {\n  var closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      target = _a.target;\n\n  var renderContent = function (toggle) {\n    return React__default['default'].createElement(ModalOverlay, null, React__default['default'].createElement(ModalBody, {\n      closeOnClickOutside: closeOnClickOutside,\n      closeOnEscape: closeOnEscape,\n      onToggle: toggle\n    }, content(toggle)));\n  };\n\n  return React__default['default'].createElement(Portal, {\n    target: target,\n    content: renderContent\n  });\n};\n\nvar Position;\n\n(function (Position) {\n  Position[\"TopLeft\"] = \"TOP_LEFT\";\n  Position[\"TopCenter\"] = \"TOP_CENTER\";\n  Position[\"TopRight\"] = \"TOP_RIGHT\";\n  Position[\"RightTop\"] = \"RIGHT_TOP\";\n  Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n  Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n  Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n  Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n  Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n  Position[\"LeftTop\"] = \"LEFT_TOP\";\n  Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n  Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(Position || (Position = {}));\n\nvar Position$1 = Position;\n\nvar calculatePosition = function (content, target, position, offset) {\n  var targetRect = target.getBoundingClientRect();\n  var contentRect = content.getBoundingClientRect();\n  var height = contentRect.height,\n      width = contentRect.width;\n  var top = 0;\n  var left = 0;\n\n  switch (position) {\n    case Position$1.TopLeft:\n      top = targetRect.top - height;\n      left = targetRect.left;\n      break;\n\n    case Position$1.TopCenter:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case Position$1.TopRight:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case Position$1.RightTop:\n      top = targetRect.top;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.RightCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.RightBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.BottomLeft:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left;\n      break;\n\n    case Position$1.BottomCenter:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case Position$1.BottomRight:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case Position$1.LeftTop:\n      top = targetRect.top;\n      left = targetRect.left - width;\n      break;\n\n    case Position$1.LeftCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left - width;\n      break;\n\n    case Position$1.LeftBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left - width;\n      break;\n  }\n\n  return {\n    left: left + (offset.left || 0),\n    top: top + (offset.top || 0)\n  };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n  React.useLayoutEffect(function () {\n    var targetEle = targetRef.current;\n    var contentEle = contentRef.current;\n    var anchorEle = anchorRef.current;\n\n    if (!contentEle || !targetEle || !anchorEle) {\n      return;\n    }\n\n    var anchorRect = anchorEle.getBoundingClientRect();\n\n    var _a = calculatePosition(contentEle, targetEle, position, offset),\n        top = _a.top,\n        left = _a.left;\n\n    contentEle.style.top = top - anchorRect.top + \"px\";\n    contentEle.style.left = left - anchorRect.left + \"px\";\n  }, []);\n};\n\nvar Arrow = function (_a) {\n  var _b;\n\n  var customClassName = _a.customClassName,\n      position = _a.position;\n  var theme = React.useContext(ThemeContext);\n  return React__default['default'].createElement(\"div\", {\n    className: classNames((_b = {}, _b[theme.prefixClass + \"-arrow\"] = true, _b[theme.prefixClass + \"-arrow-tl\"] = position === Position$1.TopLeft, _b[theme.prefixClass + \"-arrow-tc\"] = position === Position$1.TopCenter, _b[theme.prefixClass + \"-arrow-tr\"] = position === Position$1.TopRight, _b[theme.prefixClass + \"-arrow-rt\"] = position === Position$1.RightTop, _b[theme.prefixClass + \"-arrow-rc\"] = position === Position$1.RightCenter, _b[theme.prefixClass + \"-arrow-rb\"] = position === Position$1.RightBottom, _b[theme.prefixClass + \"-arrow-bl\"] = position === Position$1.BottomLeft, _b[theme.prefixClass + \"-arrow-bc\"] = position === Position$1.BottomCenter, _b[theme.prefixClass + \"-arrow-br\"] = position === Position$1.BottomRight, _b[theme.prefixClass + \"-arrow-lt\"] = position === Position$1.LeftTop, _b[theme.prefixClass + \"-arrow-lc\"] = position === Position$1.LeftCenter, _b[theme.prefixClass + \"-arrow-lb\"] = position === Position$1.LeftBottom, _b[\"\" + customClassName] = customClassName !== '', _b))\n  });\n};\n\nvar PopoverBody = function (_a) {\n  var children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef,\n      onClose = _a.onClose;\n  var theme = React.useContext(ThemeContext);\n  var contentRef = React.createRef();\n  var anchorRef = React.createRef();\n  useClickOutside(closeOnClickOutside, contentRef, onClose);\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  return React__default['default'].createElement(React__default['default'].Fragment, null, React__default['default'].createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-popover-body\",\n    ref: contentRef\n  }, React__default['default'].createElement(Arrow, {\n    customClassName: theme.prefixClass + \"-popover-body-arrow\",\n    position: position\n  }), children));\n};\n\nvar PopoverOverlay = function (_a) {\n  var closeOnEscape = _a.closeOnEscape,\n      onClose = _a.onClose;\n  var theme = React.useContext(ThemeContext);\n  useKeyUp(27, function () {\n    return closeOnEscape && onClose();\n  });\n  return React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-popover-overlay\"\n  });\n};\n\nvar Popover = function (_a) {\n  var closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n  var targetRef = React__default['default'].createRef();\n\n  var renderTarget = function (toggle, opened) {\n    return React__default['default'].createElement(\"div\", {\n      ref: targetRef\n    }, target(toggle, opened));\n  };\n\n  var renderContent = function (toggle) {\n    return React__default['default'].createElement(React__default['default'].Fragment, null, React__default['default'].createElement(PopoverOverlay, {\n      closeOnEscape: closeOnEscape,\n      onClose: toggle\n    }), React__default['default'].createElement(PopoverBody, {\n      closeOnClickOutside: closeOnClickOutside,\n      offset: offset,\n      position: position,\n      targetRef: targetRef,\n      onClose: toggle\n    }, content(toggle)));\n  };\n\n  return React__default['default'].createElement(Portal, {\n    content: renderContent,\n    target: renderTarget\n  });\n};\n\nvar TooltipBody = function (_a) {\n  var children = _a.children,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef;\n  var theme = React.useContext(ThemeContext);\n  var contentRef = React.createRef();\n  var anchorRef = React.createRef();\n  usePosition(contentRef, targetRef, anchorRef, position, offset);\n  return React__default['default'].createElement(React__default['default'].Fragment, null, React__default['default'].createElement(\"div\", {\n    ref: anchorRef,\n    style: {\n      left: 0,\n      position: 'absolute',\n      top: 0\n    }\n  }), React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-tooltip-body\",\n    ref: contentRef\n  }, React__default['default'].createElement(Arrow, {\n    customClassName: theme.prefixClass + \"-tooltip-body-arrow\",\n    position: position\n  }), React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-tooltip-body-content\"\n  }, children)));\n};\n\nvar Tooltip = function (_a) {\n  var content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n  var targetRef = React__default['default'].createRef();\n\n  var renderTarget = function (toggle) {\n    var show = function () {\n      toggle(ToggleStatus.Open);\n    };\n\n    var hide = function () {\n      toggle(ToggleStatus.Close);\n    };\n\n    return React__default['default'].createElement(\"div\", {\n      ref: targetRef,\n      onMouseEnter: show,\n      onMouseLeave: hide\n    }, target);\n  };\n\n  var renderContent = function () {\n    return React__default['default'].createElement(TooltipBody, {\n      offset: offset,\n      position: position,\n      targetRef: targetRef\n    }, content());\n  };\n\n  return React__default['default'].createElement(Portal, {\n    target: renderTarget,\n    content: renderContent\n  });\n};\n\nvar SpecialZoomLevel;\n\n(function (SpecialZoomLevel) {\n  SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n  SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n  SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(SpecialZoomLevel || (SpecialZoomLevel = {}));\n\nvar SpecialZoomLevel$1 = SpecialZoomLevel;\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction createStore(initialState) {\n  var state = initialState || {};\n  var listeners = {};\n  return {\n    subscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).concat(handler);\n    },\n    unsubscribe: function (key, handler) {\n      listeners[key] = (listeners[key] || []).filter(function (f) {\n        return f !== handler;\n      });\n    },\n    update: function (key, data) {\n      var _a;\n\n      state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\n      (listeners[key] || []).forEach(function (handler) {\n        return handler(state[key]);\n      });\n    },\n    get: function (key) {\n      return state[key];\n    }\n  };\n}\n\nvar LayerRenderStatus;\n\n(function (LayerRenderStatus) {\n  LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\n  LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\n})(LayerRenderStatus || (LayerRenderStatus = {}));\n\nvar LayerRenderStatus$1 = LayerRenderStatus;\nvar AnnotationBorderStyleType;\n\n(function (AnnotationBorderStyleType) {\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n  AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\n\nvar AnnotationBorderStyleType$1 = AnnotationBorderStyleType;\nvar dateRegex = new RegExp('^D:' + '(\\\\d{4})' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '([Z|+|-])?' + '(\\\\d{2})?' + \"'?\" + '(\\\\d{2})?' + \"'?\");\n\nvar parse = function (value, min, max, defaultValue) {\n  var parsed = parseInt(value, 10);\n  return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\n\nvar convertDate = function (input) {\n  var matches = dateRegex.exec(input);\n\n  if (!matches) {\n    return null;\n  }\n\n  var year = parseInt(matches[1], 10);\n  var month = parse(matches[2], 1, 12, 1) - 1;\n  var day = parse(matches[3], 1, 31, 1);\n  var hour = parse(matches[4], 0, 23, 0);\n  var minute = parse(matches[5], 0, 59, 0);\n  var second = parse(matches[6], 0, 59, 0);\n  var universalTimeRelation = matches[7] || 'Z';\n  var offsetHour = parse(matches[8], 0, 23, 0);\n  var offsetMinute = parse(matches[9], 0, 59, 0);\n\n  switch (universalTimeRelation) {\n    case '-':\n      hour += offsetHour;\n      minute += offsetMinute;\n      break;\n\n    case '+':\n      hour -= offsetHour;\n      minute -= offsetMinute;\n      break;\n  }\n\n  return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar PopupWrapper = function (_a) {\n  var annotation = _a.annotation;\n  var theme = React.useContext(ThemeContext);\n  var dateStr = '';\n\n  if (annotation.modificationDate) {\n    var date = convertDate(annotation.modificationDate);\n    dateStr = date ? date.toLocaleDateString() + \", \" + date.toLocaleTimeString() : '';\n  }\n\n  return React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-annotation-popup-wrapper\",\n    style: {\n      top: annotation.annotationType === AnnotationType$1.Popup ? '' : '100%'\n    }\n  }, annotation.title && React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-annotation-popup-wrapper-header\"\n  }, React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-annotation-popup-wrapper-title\"\n  }, annotation.title), React__default['default'].createElement(\"span\", {\n    className: theme.prefixClass + \"-annotation-popup-wrapper-date\"\n  }, dateStr)), annotation.contents && React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-annotation-popup-wrapper-content\"\n  }, annotation.contents.split('\\n').map(function (item, index) {\n    return React__default['default'].createElement(React.Fragment, {\n      key: index\n    }, item, React__default['default'].createElement(\"br\", null));\n  })));\n};\n\nvar TogglePopupBy;\n\n(function (TogglePopupBy) {\n  TogglePopupBy[\"Click\"] = \"Click\";\n  TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\n\nvar useTogglePopup = function () {\n  var _a = useToggle(),\n      opened = _a.opened,\n      toggle = _a.toggle;\n\n  var _b = React.useState(TogglePopupBy.Hover),\n      togglePopupBy = _b[0],\n      setTooglePopupBy = _b[1];\n\n  var toggleOnClick = function () {\n    switch (togglePopupBy) {\n      case TogglePopupBy.Click:\n        opened && setTooglePopupBy(TogglePopupBy.Hover);\n        toggle(ToggleStatus.Toggle);\n        break;\n\n      case TogglePopupBy.Hover:\n        setTooglePopupBy(TogglePopupBy.Click);\n        toggle(ToggleStatus.Open);\n        break;\n    }\n  };\n\n  var openOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Open);\n  };\n\n  var closeOnHover = function () {\n    togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Close);\n  };\n\n  return {\n    opened: opened,\n    closeOnHover: closeOnHover,\n    openOnHover: openOnHover,\n    toggleOnClick: toggleOnClick\n  };\n};\n\nvar Annotation = function (_a) {\n  var annotation = _a.annotation,\n      children = _a.children,\n      ignoreBorder = _a.ignoreBorder,\n      hasPopup = _a.hasPopup,\n      isRenderable = _a.isRenderable,\n      page = _a.page,\n      viewport = _a.viewport;\n  var rect = annotation.rect;\n\n  var _b = useTogglePopup(),\n      closeOnHover = _b.closeOnHover,\n      opened = _b.opened,\n      openOnHover = _b.openOnHover,\n      toggleOnClick = _b.toggleOnClick;\n\n  var normalizeRect = function (r) {\n    return [Math.min(r[0], r[2]), Math.min(r[1], r[3]), Math.max(r[0], r[2]), Math.max(r[1], r[3])];\n  };\n\n  var bound = normalizeRect([rect[0], page.view[3] + page.view[1] - rect[1], rect[2], page.view[3] + page.view[1] - rect[3]]);\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var styles = {\n    borderColor: '',\n    borderRadius: '',\n    borderStyle: '',\n    borderWidth: ''\n  };\n\n  if (!ignoreBorder && annotation.borderStyle.width > 0) {\n    switch (annotation.borderStyle.style) {\n      case AnnotationBorderStyleType$1.Dashed:\n        styles.borderStyle = 'dashed';\n        break;\n\n      case AnnotationBorderStyleType$1.Solid:\n        styles.borderStyle = 'solid';\n        break;\n\n      case AnnotationBorderStyleType$1.Underline:\n        styles = Object.assign({\n          borderBottomStyle: 'solid'\n        }, styles);\n        break;\n\n      case AnnotationBorderStyleType$1.Beveled:\n      case AnnotationBorderStyleType$1.Inset:\n    }\n\n    var borderWidth = annotation.borderStyle.width;\n    styles.borderWidth = borderWidth + \"px\";\n\n    if (annotation.borderStyle.style !== AnnotationBorderStyleType$1.Underline) {\n      width = width - 2 * borderWidth;\n      height = height - 2 * borderWidth;\n    }\n\n    var _c = annotation.borderStyle,\n        horizontalCornerRadius = _c.horizontalCornerRadius,\n        verticalCornerRadius = _c.verticalCornerRadius;\n\n    if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n      styles.borderRadius = horizontalCornerRadius + \"px / \" + verticalCornerRadius + \"px\";\n    }\n\n    annotation.color ? styles.borderColor = \"rgb(\" + (annotation.color[0] | 0) + \", \" + (annotation.color[1] | 0) + \", \" + (annotation.color[2] | 0) + \")\" : styles.borderWidth = '0';\n  }\n\n  return React__default['default'].createElement(React__default['default'].Fragment, null, isRenderable && children({\n    popup: {\n      opened: opened,\n      closeOnHover: closeOnHover,\n      openOnHover: openOnHover,\n      toggleOnClick: toggleOnClick\n    },\n    slot: {\n      attrs: {\n        style: Object.assign({\n          height: height + \"px\",\n          left: bound[0] + \"px\",\n          top: bound[1] + \"px\",\n          transform: \"matrix(\" + viewport.transform.join(',') + \")\",\n          transformOrigin: \"-\" + bound[0] + \"px -\" + bound[1] + \"px\",\n          width: width + \"px\"\n        }, styles)\n      },\n      children: React__default['default'].createElement(React__default['default'].Fragment, null, hasPopup && opened && React__default['default'].createElement(PopupWrapper, {\n        annotation: annotation\n      }))\n    }\n  }));\n};\n\nvar Caret = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-caret\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Circle = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-circle\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__default['default'].createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__default['default'].createElement(\"circle\", {\n      cy: height / 2,\n      fill: 'none',\n      rx: width / 2 - borderWidth / 2,\n      ry: height / 2 - borderWidth / 2,\n      stroke: 'transparent',\n      strokeWidth: borderWidth || 1\n    })), props.slot.children);\n  });\n};\n\nvar fileName = function (url) {\n  var str = url.split('/').pop();\n  return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n  var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], {\n    type: ''\n  }));\n  var link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = blobUrl || url;\n  link.setAttribute('download', fileName(url));\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  if (blobUrl) {\n    URL.revokeObjectURL(blobUrl);\n  }\n};\n\nvar FileAttachment = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\n\n  var doubleClick = function () {\n    var file = annotation.file;\n    file && downloadFile(file.filename, file.content);\n  };\n\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: true,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-file-attachment\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onDoubleClick: doubleClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar FreeText = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-free-text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Highlight = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-highlight\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Ink = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-ink\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.inkLists && annotation.inkLists.length && React__default['default'].createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, annotation.inkLists.map(function (inkList, index) {\n      return React__default['default'].createElement(\"polyline\", {\n        key: index,\n        fill: 'none',\n        stroke: 'transparent',\n        strokeWidth: borderWidth || 1,\n        points: inkList.map(function (item) {\n          return item.x - rect[0] + \",\" + (rect[3] - item.y);\n        }).join(' ')\n      });\n    })), props.slot.children);\n  });\n};\n\nvar Line = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-line\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__default['default'].createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__default['default'].createElement(\"line\", {\n      stroke: 'transparent',\n      strokeWidth: borderWidth || 1,\n      x1: rect[2] - annotation.lineCoordinates[0],\n      x2: rect[2] - annotation.lineCoordinates[2],\n      y1: rect[3] - annotation.lineCoordinates[1],\n      y2: rect[3] - annotation.lineCoordinates[3]\n    })), props.slot.children);\n  });\n};\n\nvar parse$1 = function (pageIndex, destArray) {\n  var bottomOffset;\n  var scale;\n\n  switch (destArray[1].name) {\n    case 'XYZ':\n      bottomOffset = destArray[3];\n      scale = destArray[4];\n      return {\n        bottomOffset: bottomOffset,\n        pageIndex: pageIndex - 1,\n        scaleTo: scale\n      };\n\n    case 'Fit':\n      return {\n        bottomOffset: 0,\n        pageIndex: pageIndex - 1,\n        scaleTo: SpecialZoomLevel$1.PageFit\n      };\n\n    default:\n      return {\n        bottomOffset: 0,\n        pageIndex: pageIndex - 1,\n        scaleTo: 1\n      };\n  }\n};\n\nvar getDestination = function (doc, dest) {\n  return new Promise(function (res) {\n    new Promise(function (resolve) {\n      if (typeof dest === 'string') {\n        doc.getDestination(dest).then(function (destArray) {\n          resolve(destArray);\n        });\n      } else {\n        resolve(dest);\n      }\n    }).then(function (destArray) {\n      doc.getPageIndex(destArray[0]).then(function (pageIndex) {\n        var target = parse$1(pageIndex, destArray);\n        res(target);\n      });\n    });\n  });\n};\n\nvar Link = function (_a) {\n  var annotation = _a.annotation,\n      doc = _a.doc,\n      page = _a.page,\n      viewport = _a.viewport,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var theme = React.useContext(ThemeContext);\n\n  var link = function (e) {\n    e.preventDefault();\n    annotation.action ? onExecuteNamedAction(annotation.action) : getDestination(doc, annotation.dest).then(function (target) {\n      var pageIndex = target.pageIndex,\n          bottomOffset = target.bottomOffset,\n          scaleTo = target.scaleTo;\n      onJumpToDest(pageIndex + 1, bottomOffset, 0, scaleTo);\n    });\n  };\n\n  var isRenderable = !!(annotation.url || annotation.dest || annotation.action);\n  var attrs = annotation.url ? {\n    href: annotation.url,\n    rel: 'noopener noreferrer nofollow',\n    target: annotation.newWindow ? '_blank' : '',\n    title: annotation.url\n  } : {\n    href: '',\n    onClick: link\n  };\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: false,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-link\",\n      \"data-annotation-id\": annotation.id\n    }), React__default['default'].createElement(\"a\", __assign({}, attrs)));\n  });\n};\n\nvar Polygon = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-polygon\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__default['default'].createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__default['default'].createElement(\"polygon\", {\n      fill: 'none',\n      stroke: 'transparent',\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return item.x - rect[0] + \",\" + (rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Polyline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-polyline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), annotation.vertices && annotation.vertices.length && React__default['default'].createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__default['default'].createElement(\"polyline\", {\n      fill: 'none',\n      stroke: 'transparent',\n      strokeWidth: borderWidth || 1,\n      points: annotation.vertices.map(function (item) {\n        return item.x - rect[0] + \",\" + (rect[3] - item.y);\n      }).join(' ')\n    })), props.slot.children);\n  });\n};\n\nvar Popup = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var isRenderable = !!(annotation.title || annotation.contents);\n  var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n  var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n  React.useLayoutEffect(function () {\n    if (!annotation.parentId) {\n      return;\n    }\n\n    var parent = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.parentId + \"\\\"]\");\n    var container = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.id + \"\\\"]\");\n\n    if (!parent || !container) {\n      return;\n    }\n\n    var left = parseFloat(parent.style.left);\n    var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n    container.style.left = left + \"px\";\n    container.style.top = top + \"px\";\n    container.style.transformOrigin = \"-\" + left + \"px -\" + top + \"px\";\n  }, []);\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-popup\",\n      \"data-annotation-id\": annotation.id\n    }), React__default['default'].createElement(PopupWrapper, {\n      annotation: annotation\n    }));\n  });\n};\n\nvar Square = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var rect = annotation.rect;\n  var width = rect[2] - rect[0];\n  var height = rect[3] - rect[1];\n  var borderWidth = annotation.borderStyle.width;\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-square\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), React__default['default'].createElement(\"svg\", {\n      height: height + \"px\",\n      preserveAspectRatio: 'none',\n      version: '1.1',\n      viewBox: \"0 0 \" + width + \" \" + height,\n      width: width + \"px\"\n    }, React__default['default'].createElement(\"rect\", {\n      height: height - borderWidth,\n      fill: 'none',\n      stroke: 'transparent',\n      strokeWidth: borderWidth || 1,\n      x: borderWidth / 2,\n      y: borderWidth / 2,\n      width: width - borderWidth\n    })), props.slot.children);\n  });\n};\n\nvar Squiggly = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-squiggly\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar Stamp = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-stamp\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar StrikeOut = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-strike-out\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar CommentIcon = function () {\n  return React__default['default'].createElement(Icon, {\n    size: 16\n  }, React__default['default'].createElement(\"path\", {\n    d: 'M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25'\n  }));\n};\n\nvar HelpIcon = function () {\n  return React__default['default'].createElement(Icon, {\n    size: 16\n  }, React__default['default'].createElement(\"path\", {\n    d: 'M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M21.423 5.406L17.415 9.414'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M14.587 6.585L18.607 2.565'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M5.405 21.424L9.413 17.416'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M6.585 14.588L2.577 18.596'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M18.602 21.419L14.595 17.412'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M17.419 14.58L21.428 18.589'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M2.582 5.399L6.588 9.406'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M9.421 6.581L5.412 2.572'\n  }));\n};\n\nvar KeyIcon = function () {\n  return React__default['default'].createElement(Icon, {\n    size: 16\n  }, React__default['default'].createElement(\"path\", {\n    d: 'M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z'\n  }));\n};\n\nvar NoteIcon = function () {\n  return React__default['default'].createElement(Icon, {\n    size: 16\n  }, React__default['default'].createElement(\"path\", {\n    d: 'M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M6 4.5L6 0.5'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M18 4.5L18 0.5'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M10 4.5L10 0.5'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M14 4.5L14 0.5'\n  }));\n};\n\nvar ParagraphIcon = function () {\n  return React__default['default'].createElement(Icon, {\n    size: 16\n  }, React__default['default'].createElement(\"path\", {\n    d: 'M17.5 0.498L17.5 23.498'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M10.5 0.498L10.5 23.498'\n  }), React__default['default'].createElement(\"path\", {\n    d: 'M23.5.5H6.5a6,6,0,0,0,0,12h4'\n  }));\n};\n\nvar TriangleIcon = function () {\n  return React__default['default'].createElement(Icon, {\n    size: 16\n  }, React__default['default'].createElement(\"path\", {\n    d: 'M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z'\n  }));\n};\n\nvar Text = function (_a) {\n  var annotation = _a.annotation,\n      childAnnotation = _a.childAnnotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  var name = annotation.name ? annotation.name.toLowerCase() : '';\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: false,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(React__default['default'].Fragment, null, React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-text\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), name && React__default['default'].createElement(\"div\", {\n      className: theme.prefixClass + \"-annotation-text-icon\"\n    }, name === 'check' && React__default['default'].createElement(CheckIcon, null), name === 'comment' && React__default['default'].createElement(CommentIcon, null), name === 'help' && React__default['default'].createElement(HelpIcon, null), name === 'insert' && React__default['default'].createElement(TriangleIcon, null), name === 'key' && React__default['default'].createElement(KeyIcon, null), name === 'note' && React__default['default'].createElement(NoteIcon, null), (name === 'newparagraph' || name === 'paragraph') && React__default['default'].createElement(ParagraphIcon, null)), props.slot.children), childAnnotation && childAnnotation.annotationType === AnnotationType$1.Popup && props.popup.opened && React__default['default'].createElement(Popup, {\n      annotation: childAnnotation,\n      page: page,\n      viewport: viewport\n    }));\n  });\n};\n\nvar Underline = function (_a) {\n  var annotation = _a.annotation,\n      page = _a.page,\n      viewport = _a.viewport;\n  var theme = React.useContext(ThemeContext);\n  var hasPopup = annotation.hasPopup === false;\n  var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n  return React__default['default'].createElement(Annotation, {\n    annotation: annotation,\n    hasPopup: hasPopup,\n    ignoreBorder: true,\n    isRenderable: isRenderable,\n    page: page,\n    viewport: viewport\n  }, function (props) {\n    return React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, {\n      className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-underline\",\n      \"data-annotation-id\": annotation.id,\n      onClick: props.popup.toggleOnClick,\n      onMouseEnter: props.popup.openOnHover,\n      onMouseLeave: props.popup.closeOnHover\n    }), props.slot.children);\n  });\n};\n\nvar AnnotationLayerBody = function (_a) {\n  var annotations = _a.annotations,\n      containerRef = _a.containerRef,\n      doc = _a.doc,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var viewport = page.getViewport({\n    rotation: rotation,\n    scale: scale\n  });\n  var clonedViewPort = viewport.clone({\n    dontFlip: true\n  });\n  var filterAnnotations = annotations.filter(function (annotation) {\n    return !annotation.parentId;\n  });\n  React.useEffect(function () {\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    plugins.forEach(function (plugin) {\n      if (plugin.onAnnotationLayerRender) {\n        plugin.onAnnotationLayerRender({\n          annotations: filterAnnotations,\n          container: container,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale\n        });\n      }\n    });\n  }, []);\n  return React__default['default'].createElement(React__default['default'].Fragment, null, filterAnnotations.map(function (annotation) {\n    var childAnnotation = annotations.find(function (item) {\n      return item.parentId === annotation.id;\n    });\n\n    switch (annotation.annotationType) {\n      case AnnotationType$1.Caret:\n        return React__default['default'].createElement(Caret, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Circle:\n        return React__default['default'].createElement(Circle, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.FileAttachment:\n        return React__default['default'].createElement(FileAttachment, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.FreeText:\n        return React__default['default'].createElement(FreeText, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Highlight:\n        return React__default['default'].createElement(Highlight, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Ink:\n        return React__default['default'].createElement(Ink, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Line:\n        return React__default['default'].createElement(Line, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Link:\n        return React__default['default'].createElement(Link, {\n          key: annotation.id,\n          annotation: annotation,\n          doc: doc,\n          page: page,\n          viewport: clonedViewPort,\n          onExecuteNamedAction: onExecuteNamedAction,\n          onJumpToDest: onJumpToDest\n        });\n\n      case AnnotationType$1.Polygon:\n        return React__default['default'].createElement(Polygon, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Polyline:\n        return React__default['default'].createElement(Polyline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Popup:\n        return React__default['default'].createElement(Popup, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Square:\n        return React__default['default'].createElement(Square, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Squiggly:\n        return React__default['default'].createElement(Squiggly, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Stamp:\n        return React__default['default'].createElement(Stamp, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.StrikeOut:\n        return React__default['default'].createElement(StrikeOut, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Text:\n        return React__default['default'].createElement(Text, {\n          key: annotation.id,\n          annotation: annotation,\n          childAnnotation: childAnnotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      case AnnotationType$1.Underline:\n        return React__default['default'].createElement(Underline, {\n          key: annotation.id,\n          annotation: annotation,\n          page: page,\n          viewport: clonedViewPort\n        });\n\n      default:\n        return React__default['default'].createElement(React.Fragment, {\n          key: annotation.id\n        });\n    }\n  }));\n};\n\nvar AnnotationLoader = function (_a) {\n  var page = _a.page,\n      renderAnnotations = _a.renderAnnotations;\n\n  var _b = React.useState({\n    loading: true,\n    annotations: []\n  }),\n      status = _b[0],\n      setStatus = _b[1];\n\n  React.useEffect(function () {\n    page.getAnnotations({\n      intent: 'display'\n    }).then(function (result) {\n      setStatus({\n        loading: false,\n        annotations: result\n      });\n    });\n  }, []);\n  return status.loading ? React__default['default'].createElement(React__default['default'].Fragment, null) : renderAnnotations(status.annotations);\n};\n\nvar AnnotationLayer = function (_a) {\n  var doc = _a.doc,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest;\n  var theme = React.useContext(ThemeContext);\n  var containerRef = React.createRef();\n\n  var renderAnnotations = function (annotations) {\n    return React__default['default'].createElement(AnnotationLayerBody, {\n      annotations: annotations,\n      containerRef: containerRef,\n      doc: doc,\n      page: page,\n      pageIndex: pageIndex,\n      plugins: plugins,\n      rotation: rotation,\n      scale: scale,\n      onExecuteNamedAction: onExecuteNamedAction,\n      onJumpToDest: onJumpToDest\n    });\n  };\n\n  return React__default['default'].createElement(\"div\", {\n    ref: containerRef,\n    className: theme.prefixClass + \"-annotation-layer\"\n  }, React__default['default'].createElement(AnnotationLoader, {\n    page: page,\n    renderAnnotations: renderAnnotations\n  }));\n};\n\nvar WithScale = function (_a) {\n  var callback = _a.callback,\n      children = _a.children,\n      rotation = _a.rotation,\n      scale = _a.scale;\n  React.useLayoutEffect(function () {\n    callback();\n  }, [rotation, scale]);\n  return React__default['default'].createElement(React__default['default'].Fragment, null, children);\n};\n\nvar CanvasLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width;\n  var theme = React.useContext(ThemeContext);\n  var canvasRef = React.createRef();\n  var renderTask = React.useRef();\n  var devicePixelRatio = window.devicePixelRatio || 1;\n\n  var renderCanvas = function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvasEle = canvasRef.current;\n    plugins.forEach(function (plugin) {\n      if (plugin.onCanvasLayerRender) {\n        plugin.onCanvasLayerRender({\n          ele: canvasEle,\n          pageIndex: pageIndex,\n          rotation: rotation,\n          scale: scale,\n          status: LayerRenderStatus$1.PreRender\n        });\n      }\n    });\n    canvasEle.height = height * devicePixelRatio;\n    canvasEle.width = width * devicePixelRatio;\n    canvasEle.style.opacity = '0';\n    var canvasContext = canvasEle.getContext('2d', {\n      alpha: false\n    });\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale * devicePixelRatio\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      canvasEle.style.removeProperty('opacity');\n      plugins.forEach(function (plugin) {\n        if (plugin.onCanvasLayerRender) {\n          plugin.onCanvasLayerRender({\n            ele: canvasEle,\n            pageIndex: pageIndex,\n            rotation: rotation,\n            scale: scale,\n            status: LayerRenderStatus$1.DidRender\n          });\n        }\n      });\n    }, function () {});\n  };\n\n  return React__default['default'].createElement(WithScale, {\n    callback: renderCanvas,\n    rotation: rotation,\n    scale: scale\n  }, React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-canvas-layer\",\n    style: {\n      height: height + \"px\",\n      width: width + \"px\"\n    }\n  }, React__default['default'].createElement(\"canvas\", {\n    ref: canvasRef,\n    style: {\n      transform: \"scale(\" + 1 / devicePixelRatio + \")\",\n      transformOrigin: \"top left\"\n    }\n  })));\n};\n\nvar SvgLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width;\n  var theme = React.useContext(ThemeContext);\n  var containerRef = React.createRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    containerEle.innerHTML = '';\n  };\n\n  var renderSvg = function () {\n    var containerEle = containerRef.current;\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    page.getOperatorList().then(function (operatorList) {\n      empty();\n      var graphic = new PdfJs__namespace.SVGGraphics(page.commonObjs, page.objs);\n      graphic.getSVG(operatorList, viewport).then(function (svg) {\n        svg.style.height = height + \"px\";\n        svg.style.width = width + \"px\";\n        containerEle.appendChild(svg);\n      });\n    });\n  };\n\n  return React__default['default'].createElement(WithScale, {\n    callback: renderSvg,\n    rotation: rotation,\n    scale: scale\n  }, React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-svg-layer\",\n    ref: containerRef\n  }));\n};\n\nvar TextLayer = function (_a) {\n  var page = _a.page,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      rotation = _a.rotation,\n      scale = _a.scale;\n  var theme = React.useContext(ThemeContext);\n  var containerRef = React.createRef();\n  var renderTask = React.useRef();\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text\");\n    var numSpans = spans.length;\n\n    for (var i = 0; i < numSpans; i++) {\n      var span = spans[i];\n      containerEle.removeChild(span);\n    }\n  };\n\n  var renderText = function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    plugins.forEach(function (plugin) {\n      if (plugin.onTextLayerRender) {\n        plugin.onTextLayerRender({\n          ele: containerEle,\n          pageIndex: pageIndex,\n          scale: scale,\n          status: LayerRenderStatus$1.PreRender\n        });\n      }\n    });\n    page.getTextContent().then(function (textContent) {\n      empty();\n      renderTask.current = PdfJs__namespace.renderTextLayer({\n        container: containerEle,\n        textContent: textContent,\n        viewport: viewport\n      });\n      renderTask.current.promise.then(function () {\n        var spans = containerEle.childNodes;\n        var numSpans = spans.length;\n\n        for (var i = 0; i < numSpans; i++) {\n          var span = spans[i];\n          span.classList.add(theme.prefixClass + \"-text\");\n        }\n\n        plugins.forEach(function (plugin) {\n          if (plugin.onTextLayerRender) {\n            plugin.onTextLayerRender({\n              ele: containerEle,\n              pageIndex: pageIndex,\n              scale: scale,\n              status: LayerRenderStatus$1.DidRender\n            });\n          }\n        });\n      }, function () {});\n    });\n  };\n\n  return React__default['default'].createElement(WithScale, {\n    callback: renderText,\n    rotation: rotation,\n    scale: scale\n  }, React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-text-layer\",\n    ref: containerRef\n  }));\n};\n\nvar NUMBER_OF_OVERSCAN_PAGES = 2;\n\nvar PageLayer = function (_a) {\n  var currentPage = _a.currentPage,\n      doc = _a.doc,\n      height = _a.height,\n      pageIndex = _a.pageIndex,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width,\n      onExecuteNamedAction = _a.onExecuteNamedAction,\n      onJumpToDest = _a.onJumpToDest,\n      onPageVisibilityChanged = _a.onPageVisibilityChanged;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState({\n    page: null,\n    pageHeight: height,\n    pageWidth: width,\n    viewportRotation: 0\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var page = pageSize.page,\n      pageHeight = pageSize.pageHeight,\n      pageWidth = pageSize.pageWidth;\n  var prevIsCalculated = React.useRef(false);\n  var intersectionThreshold = Array(10).fill(null).map(function (_, i) {\n    return i / 10;\n  });\n  var scaledWidth = pageWidth * scale;\n  var scaledHeight = pageHeight * scale;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  var w = isVertical ? scaledWidth : scaledHeight;\n  var h = isVertical ? scaledHeight : scaledWidth;\n\n  var determinePageSize = function () {\n    if (prevIsCalculated.current) {\n      return;\n    }\n\n    prevIsCalculated.current = true;\n    doc.getPage(pageIndex + 1).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      setPageSize({\n        page: pdfPage,\n        pageHeight: viewport.height,\n        pageWidth: viewport.width,\n        viewportRotation: viewport.rotation\n      });\n    });\n  };\n\n  var visibilityChanged = function (params) {\n    onPageVisibilityChanged(pageIndex, params.isVisible ? params.ratio : -1);\n\n    if (params.isVisible) {\n      determinePageSize();\n    }\n  };\n\n  var defaultPageRenderer = function (props) {\n    return React__default['default'].createElement(React__default['default'].Fragment, null, props.canvasLayer.children, props.textLayer.children, props.annotationLayer.children);\n  };\n\n  var renderPageLayer = renderPage || defaultPageRenderer;\n  var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n  React.useEffect(function () {\n    if (currentPage - NUMBER_OF_OVERSCAN_PAGES <= pageIndex && pageIndex <= currentPage + NUMBER_OF_OVERSCAN_PAGES) {\n      determinePageSize();\n    }\n  }, [currentPage]);\n  return React__default['default'].createElement(Observer, {\n    onVisibilityChanged: visibilityChanged,\n    threshold: intersectionThreshold\n  }, React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-page-layer\",\n    style: {\n      height: h + \"px\",\n      width: w + \"px\"\n    }\n  }, !page ? React__default['default'].createElement(Spinner, null) : renderPageLayer({\n    annotationLayer: {\n      attrs: {},\n      children: React__default['default'].createElement(AnnotationLayer, {\n        doc: doc,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationNumber,\n        scale: scale,\n        onExecuteNamedAction: onExecuteNamedAction,\n        onJumpToDest: onJumpToDest\n      })\n    },\n    canvasLayer: {\n      attrs: {},\n      children: React__default['default'].createElement(CanvasLayer, {\n        height: h,\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationNumber,\n        scale: scale,\n        width: w\n      })\n    },\n    doc: doc,\n    height: h,\n    pageIndex: pageIndex,\n    rotation: rotation,\n    scale: scale,\n    svgLayer: {\n      attrs: {},\n      children: React__default['default'].createElement(SvgLayer, {\n        height: h,\n        page: page,\n        rotation: rotationNumber,\n        scale: scale,\n        width: w\n      })\n    },\n    textLayer: {\n      attrs: {},\n      children: React__default['default'].createElement(TextLayer, {\n        page: page,\n        pageIndex: pageIndex,\n        plugins: plugins,\n        rotation: rotationNumber,\n        scale: scale\n      })\n    },\n    width: w\n  })));\n};\n\nvar getFileExt = function (url) {\n  var str = url.split(/\\./).pop();\n  return str ? str.toLowerCase() : '';\n};\n\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\n\nvar Inner = function (_a) {\n  var defaultScale = _a.defaultScale,\n      doc = _a.doc,\n      initialPage = _a.initialPage,\n      pageSize = _a.pageSize,\n      plugins = _a.plugins,\n      renderPage = _a.renderPage,\n      viewerState = _a.viewerState,\n      onDocumentLoad = _a.onDocumentLoad,\n      onOpenFile = _a.onOpenFile,\n      onPageChange = _a.onPageChange,\n      onZoom = _a.onZoom;\n  var theme = React.useContext(ThemeContext);\n  var containerRef = React.useRef(null);\n  var pagesRef = React.useRef(null);\n\n  var _b = React.useState(pageSize.scale),\n      scale = _b[0],\n      setScale = _b[1];\n\n  var _c = React.useState(0),\n      currentPage = _c[0],\n      setCurrentPage = _c[1];\n\n  var _d = React.useState(0),\n      rotation = _d[0],\n      setRotation = _d[1];\n\n  var stateRef = React.useRef(viewerState);\n  var numPages = doc.numPages;\n  var pageWidth = pageSize.pageWidth,\n      pageHeight = pageSize.pageHeight;\n  var arr = Array(numPages).fill(null);\n  var pageVisibility = arr.map(function () {\n    return 0;\n  });\n  var pageRefs = arr.map(function () {\n    return React.useRef();\n  });\n\n  var setViewerState = function (viewerState) {\n    var newState = viewerState;\n    plugins.forEach(function (plugin) {\n      if (plugin.onViewerStateChange) {\n        newState = plugin.onViewerStateChange(newState);\n      }\n    });\n    stateRef.current = newState;\n  };\n\n  var getPagesRef = function () {\n    return pagesRef;\n  };\n\n  var getViewerState = function () {\n    return stateRef.current;\n  };\n\n  var jumpToDestination = function (pageIndex, bottomOffset, leftOffset, scaleTo) {\n    var pagesContainer = pagesRef.current;\n    var currentState = stateRef.current;\n\n    if (!pagesContainer || !currentState) {\n      return;\n    }\n\n    var newPageIndex = pageIndex + 1;\n    doc.getPage(newPageIndex).then(function (page) {\n      var viewport = page.getViewport({\n        scale: 1\n      });\n      var top = 0;\n      var bottom = bottomOffset || 0;\n      var left = leftOffset || 0;\n\n      switch (scaleTo) {\n        case SpecialZoomLevel$1.PageFit:\n          top = 0;\n          left = 0;\n          zoom(SpecialZoomLevel$1.PageFit);\n          break;\n\n        default:\n          top = (viewport.height - bottom) * currentState.scale;\n          left = left * currentState.scale;\n          break;\n      }\n\n      var targetPageEle = pageRefs[pageIndex].current;\n\n      if (targetPageEle) {\n        pagesContainer.scrollTop = targetPageEle.offsetTop + top;\n        pagesContainer.scrollLeft = targetPageEle.offsetLeft + left;\n      }\n    });\n  };\n\n  var jumpToPage = function (pageIndex) {\n    if (pageIndex < 0 || pageIndex >= numPages) {\n      return;\n    }\n\n    var pagesContainer = pagesRef.current;\n    var targetPage = pageRefs[pageIndex].current;\n\n    if (pagesContainer && targetPage) {\n      pagesContainer.scrollTop = targetPage.offsetTop;\n      pagesContainer.scrollLeft = targetPage.offsetLeft;\n    }\n\n    setCurrentPage(pageIndex);\n  };\n\n  var openFile = function (file) {\n    if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n      return;\n    }\n\n    new Promise(function (resolve) {\n      var reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onload = function () {\n        var bytes = new Uint8Array(reader.result);\n        resolve(bytes);\n      };\n    }).then(function (data) {\n      onOpenFile(file.name, data);\n    });\n  };\n\n  var rotate = function (updateRotation) {\n    setRotation(updateRotation);\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentPage,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      rotation: updateRotation,\n      scale: scale\n    });\n  };\n\n  var zoom = function (newScale) {\n    var pagesEle = pagesRef.current;\n    var currentState = stateRef.current;\n\n    if (!pagesEle || !currentState) {\n      return;\n    }\n\n    var updateScale = 1;\n\n    switch (newScale) {\n      case SpecialZoomLevel$1.ActualSize:\n        updateScale = 1;\n        break;\n\n      case SpecialZoomLevel$1.PageFit:\n        updateScale = Math.min((pagesEle.clientWidth - SCROLL_BAR_WIDTH) / pageWidth, (pagesEle.clientHeight - 2 * PAGE_PADDING) / pageHeight);\n        break;\n\n      case SpecialZoomLevel$1.PageWidth:\n        updateScale = (pagesEle.clientWidth - SCROLL_BAR_WIDTH) / pageWidth;\n        break;\n\n      default:\n        updateScale = newScale;\n        break;\n    }\n\n    setScale(updateScale);\n    onZoom({\n      doc: doc,\n      scale: updateScale\n    });\n  };\n\n  React.useEffect(function () {\n    var pagesEle = pagesRef.current;\n    var currentState = stateRef.current;\n\n    if (!pagesEle || !currentState) {\n      return;\n    }\n\n    pagesEle.scrollTop = pagesEle.scrollTop * scale / currentState.scale;\n    pagesEle.scrollLeft = pagesEle.scrollLeft * scale / currentState.scale;\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentState.pageIndex,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      scale: scale\n    });\n  }, [scale]);\n\n  var getPluginMethods = function () {\n    return {\n      getPagesRef: getPagesRef,\n      getViewerState: getViewerState,\n      jumpToDestination: jumpToDestination,\n      jumpToPage: jumpToPage,\n      openFile: openFile,\n      rotate: rotate,\n      setViewerState: setViewerState,\n      zoom: zoom\n    };\n  };\n\n  React.useEffect(function () {\n    var pluginMethods = getPluginMethods();\n    plugins.forEach(function (plugin) {\n      if (plugin.install) {\n        plugin.install(pluginMethods);\n      }\n    });\n    return function () {\n      plugins.forEach(function (plugin) {\n        if (plugin.uninstall) {\n          plugin.uninstall(pluginMethods);\n        }\n      });\n    };\n  }, []);\n  React.useEffect(function () {\n    onDocumentLoad({\n      doc: doc\n    });\n    plugins.forEach(function (plugin) {\n      plugin.onDocumentLoad && plugin.onDocumentLoad({\n        doc: doc\n      });\n    });\n\n    if (initialPage) {\n      jumpToPage(initialPage);\n    }\n  }, []);\n  React.useEffect(function () {\n    onPageChange({\n      currentPage: currentPage,\n      doc: doc\n    });\n    setViewerState({\n      file: viewerState.file,\n      pageIndex: currentPage,\n      pageHeight: pageHeight,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      scale: scale\n    });\n  }, [currentPage]);\n  React.useEffect(function () {\n    if (defaultScale) {\n      zoom(defaultScale);\n    }\n  }, []);\n\n  var pageVisibilityChanged = function (pageIndex, ratio) {\n    pageVisibility[pageIndex] = ratio;\n    var maxRatioPage = pageVisibility.reduce(function (maxIndex, item, index, array) {\n      return item > array[maxIndex] ? index : maxIndex;\n    }, 0);\n    setCurrentPage(maxRatioPage);\n  };\n\n  var executeNamedAction = function (action) {\n    var previousPage = currentPage - 1;\n    var nextPage = currentPage + 1;\n\n    switch (action) {\n      case 'FirstPage':\n        jumpToPage(0);\n        break;\n\n      case 'LastPage':\n        jumpToPage(numPages - 1);\n        break;\n\n      case 'NextPage':\n        nextPage < numPages && jumpToPage(nextPage);\n        break;\n\n      case 'PrevPage':\n        previousPage >= 0 && jumpToPage(previousPage);\n        break;\n    }\n  };\n\n  var renderViewer = function () {\n    var slot = {\n      attrs: {\n        ref: containerRef,\n        style: {\n          height: '100%'\n        }\n      },\n      children: React__default['default'].createElement(React__default['default'].Fragment, null),\n      subSlot: {\n        attrs: {\n          ref: pagesRef,\n          style: {\n            height: '100%',\n            overflow: 'auto',\n            position: 'relative'\n          }\n        },\n        children: React__default['default'].createElement(React__default['default'].Fragment, null, Array(numPages).fill(0).map(function (_, index) {\n          return React__default['default'].createElement(\"div\", {\n            className: theme.prefixClass + \"-inner-page\",\n            key: \"pagelayer-\" + index,\n            ref: function (ref) {\n              pageRefs[index].current = ref;\n            }\n          }, React__default['default'].createElement(PageLayer, {\n            currentPage: currentPage,\n            doc: doc,\n            height: pageHeight,\n            pageIndex: index,\n            plugins: plugins,\n            renderPage: renderPage,\n            rotation: rotation,\n            scale: scale,\n            width: pageWidth,\n            onExecuteNamedAction: executeNamedAction,\n            onJumpToDest: jumpToDestination,\n            onPageVisibilityChanged: pageVisibilityChanged\n          }));\n        }))\n      }\n    };\n    plugins.forEach(function (plugin) {\n      if (plugin.renderViewer) {\n        slot = plugin.renderViewer({\n          containerRef: containerRef,\n          doc: doc,\n          pageHeight: pageHeight,\n          pageWidth: pageWidth,\n          rotation: rotation,\n          slot: slot,\n          jumpToPage: jumpToPage,\n          openFile: openFile,\n          rotate: rotate,\n          zoom: zoom\n        });\n      }\n    });\n    return slot;\n  };\n\n  var renderSlot = function (slot) {\n    return React__default['default'].createElement(\"div\", __assign({}, slot.attrs, {\n      style: slot.attrs && slot.attrs.style ? slot.attrs.style : {}\n    }), slot.children, slot.subSlot && renderSlot(slot.subSlot));\n  };\n\n  return renderSlot(renderViewer());\n};\n\nvar LEVELS = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6, 5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10];\n\nvar decrease = function (currentLevel) {\n  var found = LEVELS.findIndex(function (item) {\n    return item >= currentLevel;\n  });\n  return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar PageSizeCalculator = function (_a) {\n  var doc = _a.doc,\n      render = _a.render;\n  var theme = React.useContext(ThemeContext);\n  var pagesRef = React.useRef(null);\n\n  var _b = React.useState({\n    pageHeight: 0,\n    pageWidth: 0,\n    scale: 1\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  React.useEffect(function () {\n    doc.getPage(1).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      var w = viewport.width;\n      var h = viewport.height;\n      var pagesEle = pagesRef.current;\n\n      if (!pagesEle) {\n        return;\n      }\n\n      var scaled = (pagesEle.clientWidth - 2 * 50) / w;\n      var scale = decrease(Math.max(1, scaled));\n      setPageSize({\n        pageHeight: h,\n        pageWidth: w,\n        scale: scale\n      });\n    });\n  }, [doc]);\n  var pageWidth = pageSize.pageWidth;\n  return pageWidth === 0 ? React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-page-size-calculator\",\n    ref: pagesRef\n  }, React__default['default'].createElement(Spinner, null)) : render(pageSize);\n};\n\nvar LoadingStatus = function () {\n  function LoadingStatus() {}\n\n  return LoadingStatus;\n}();\n\nvar AskForPasswordState = function (_super) {\n  __extends(AskForPasswordState, _super);\n\n  function AskForPasswordState(verifyPasswordFn) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPasswordFn = verifyPasswordFn;\n    return _this;\n  }\n\n  return AskForPasswordState;\n}(LoadingStatus);\n\nvar AskingPassword = function (_a) {\n  var verifyPasswordFn = _a.verifyPasswordFn;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var changePassword = function (e) {\n    return setPassword(e.target.value);\n  };\n\n  var submit = function () {\n    return verifyPasswordFn(password);\n  };\n\n  return React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password\"\n  }, React__default['default'].createElement(\"div\", null, React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-message\"\n  }, l10n.core.askingPassword.requirePasswordToOpen, \":\"), React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-input-container\"\n  }, React__default['default'].createElement(\"input\", {\n    className: theme.prefixClass + \"-asking-password-input\",\n    type: \"password\",\n    onChange: changePassword\n  }), React__default['default'].createElement(\"button\", {\n    className: theme.prefixClass + \"-asking-password-button\",\n    onClick: submit\n  }, l10n.core.askingPassword.submit))));\n};\n\nvar CompletedState = function (_super) {\n  __extends(CompletedState, _super);\n\n  function CompletedState(doc) {\n    var _this = _super.call(this) || this;\n\n    _this.doc = doc;\n    return _this;\n  }\n\n  return CompletedState;\n}(LoadingStatus);\n\nvar FailureState = function (_super) {\n  __extends(FailureState, _super);\n\n  function FailureState(error) {\n    var _this = _super.call(this) || this;\n\n    _this.error = error;\n    return _this;\n  }\n\n  return FailureState;\n}(LoadingStatus);\n\nvar LoadingState = function (_super) {\n  __extends(LoadingState, _super);\n\n  function LoadingState(percentages) {\n    var _this = _super.call(this) || this;\n\n    _this.percentages = percentages;\n    return _this;\n  }\n\n  return LoadingState;\n}(LoadingStatus);\n\nvar WrongPassword = function (_a) {\n  var verifyPasswordFn = _a.verifyPasswordFn;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var changePassword = function (e) {\n    return setPassword(e.target.value);\n  };\n\n  var submit = function () {\n    return verifyPasswordFn(password);\n  };\n\n  return React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password\"\n  }, React__default['default'].createElement(\"div\", null, React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-message\"\n  }, l10n.core.wrongPassword.tryAgain, \":\"), React__default['default'].createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-input-container\"\n  }, React__default['default'].createElement(\"input\", {\n    className: theme.prefixClass + \"-asking-password-input\",\n    type: \"password\",\n    onChange: changePassword\n  }), React__default['default'].createElement(\"button\", {\n    className: theme.prefixClass + \"-asking-password-button\",\n    onClick: submit\n  }, l10n.core.wrongPassword.submit))));\n};\n\nvar WrongPasswordState = function (_super) {\n  __extends(WrongPasswordState, _super);\n\n  function WrongPasswordState(verifyPasswordFn) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPasswordFn = verifyPasswordFn;\n    return _this;\n  }\n\n  return WrongPasswordState;\n}(LoadingStatus);\n\nvar DocumentLoader = function (_a) {\n  var authorization = _a.authorization,\n      characterMap = _a.characterMap,\n      file = _a.file,\n      httpHeaders = _a.httpHeaders,\n      render = _a.render,\n      renderError = _a.renderError,\n      renderLoader = _a.renderLoader;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(new LoadingState(0)),\n      status = _b[0],\n      setStatus = _b[1];\n\n  var _c = React.useState(0),\n      percentages = _c[0],\n      setPercentages = _c[1];\n\n  var _d = React.useState(null),\n      loadedDocument = _d[0],\n      setLoadedDocument = _d[1];\n\n  React.useEffect(function () {\n    setStatus(new LoadingState(0));\n    var params = Object.assign({}, 'string' === typeof file ? {\n      url: file\n    } : {\n      data: file\n    }, characterMap ? {\n      cMapUrl: characterMap.url,\n      cMapPacked: characterMap.isCompressed\n    } : {});\n\n    if (authorization) {\n      params.withCredentials = true;\n\n      if (httpHeaders) {\n        params.httpHeaders = httpHeaders;\n\n        if (!params.httpHeaders['Authorization']) {\n          params.httpHeaders['Authorization'] = authorization;\n        }\n      } else {\n        params.httpHeaders = {\n          'Authorization': authorization\n        };\n      }\n    }\n\n    var loadingTask = PdfJs__namespace.getDocument(params);\n\n    loadingTask.onPassword = function (verifyPassword, reason) {\n      switch (reason) {\n        case PdfJs__namespace.PasswordResponses.NEED_PASSWORD:\n          setStatus(new AskForPasswordState(verifyPassword));\n          break;\n\n        case PdfJs__namespace.PasswordResponses.INCORRECT_PASSWORD:\n          setStatus(new WrongPasswordState(verifyPassword));\n          break;\n      }\n    };\n\n    loadingTask.onProgress = function (progress) {\n      progress.total > 0 ? setPercentages(Math.min(100, 100 * progress.loaded / progress.total)) : setPercentages(100);\n    };\n\n    loadingTask.promise.then(function (doc) {\n      return setLoadedDocument(doc);\n    }, function (err) {\n      return setStatus(new FailureState({\n        message: err.message || 'Cannot load document',\n        name: err.name\n      }));\n    });\n    return function () {\n      loadingTask.destroy();\n    };\n  }, [file]);\n  React.useEffect(function () {\n    percentages === 100 && loadedDocument ? setStatus(new CompletedState(loadedDocument)) : setStatus(new LoadingState(percentages));\n  }, [percentages, loadedDocument]);\n\n  switch (true) {\n    case status instanceof AskForPasswordState:\n      return React__default['default'].createElement(AskingPassword, {\n        verifyPasswordFn: status.verifyPasswordFn\n      });\n\n    case status instanceof WrongPasswordState:\n      return React__default['default'].createElement(WrongPassword, {\n        verifyPasswordFn: status.verifyPasswordFn\n      });\n\n    case status instanceof CompletedState:\n      return render(status.doc);\n\n    case status instanceof FailureState:\n      return renderError ? renderError(status.error) : React__default['default'].createElement(\"div\", {\n        className: theme.prefixClass + \"-doc-error\"\n      }, React__default['default'].createElement(\"div\", {\n        className: theme.prefixClass + \"-doc-error-text\"\n      }, status.error.message));\n\n    case status instanceof LoadingState:\n      return React__default['default'].createElement(\"div\", {\n        className: theme.prefixClass + \"-doc-loading\"\n      }, renderLoader ? renderLoader(status.percentages) : React__default['default'].createElement(Spinner, null));\n\n    default:\n      return React__default['default'].createElement(\"div\", {\n        className: theme.prefixClass + \"-doc-loading\"\n      }, React__default['default'].createElement(Spinner, null));\n  }\n};\n\nvar ThemeProvider = function (_a) {\n  var children = _a.children,\n      prefixClass = _a.prefixClass;\n  return React__default['default'].createElement(ThemeContext.Provider, {\n    value: {\n      prefixClass: prefixClass || 'rpv-core'\n    }\n  }, children);\n};\n\nvar Viewer = function (_a) {\n  var _b = _a.authorization,\n      authorization = _b === void 0 ? '' : _b,\n      characterMap = _a.characterMap,\n      defaultScale = _a.defaultScale,\n      fileUrl = _a.fileUrl,\n      httpHeaders = _a.httpHeaders,\n      _c = _a.initialPage,\n      initialPage = _c === void 0 ? 0 : _c,\n      localization = _a.localization,\n      _d = _a.plugins,\n      plugins = _d === void 0 ? [] : _d,\n      prefixClass = _a.prefixClass,\n      renderError = _a.renderError,\n      renderPage = _a.renderPage,\n      renderLoader = _a.renderLoader,\n      _e = _a.onDocumentLoad,\n      onDocumentLoad = _e === void 0 ? function () {} : _e,\n      _f = _a.onPageChange,\n      onPageChange = _f === void 0 ? function () {} : _f,\n      _g = _a.onZoom,\n      onZoom = _g === void 0 ? function () {} : _g;\n\n  var _h = React.useState({\n    data: fileUrl,\n    name: typeof fileUrl === 'string' ? fileUrl : ''\n  }),\n      file = _h[0],\n      setFile = _h[1];\n\n  var openFile = function (fileName, data) {\n    setFile({\n      data: data,\n      name: fileName\n    });\n  };\n\n  React.useEffect(function () {\n    setFile({\n      data: fileUrl,\n      name: typeof fileUrl === 'string' ? fileUrl : ''\n    });\n  }, [fileUrl]);\n  return React__default['default'].createElement(ThemeProvider, {\n    prefixClass: prefixClass\n  }, React__default['default'].createElement(LocalizationProvider, {\n    localization: localization\n  }, function (_) {\n    return React__default['default'].createElement(DocumentLoader, {\n      authorization: authorization,\n      characterMap: characterMap,\n      file: file.data,\n      httpHeaders: httpHeaders,\n      render: function (doc) {\n        return React__default['default'].createElement(PageSizeCalculator, {\n          doc: doc,\n          render: function (ps) {\n            return React__default['default'].createElement(Inner, {\n              defaultScale: defaultScale,\n              doc: doc,\n              initialPage: initialPage,\n              pageSize: ps,\n              plugins: plugins,\n              renderPage: renderPage,\n              viewerState: {\n                file: file,\n                pageIndex: initialPage,\n                pageHeight: ps.pageHeight,\n                pageWidth: ps.pageWidth,\n                rotation: 0,\n                scale: ps.scale\n              },\n              onDocumentLoad: onDocumentLoad,\n              onOpenFile: openFile,\n              onPageChange: onPageChange,\n              onZoom: onZoom\n            });\n          }\n        });\n      },\n      renderError: renderError,\n      renderLoader: renderLoader\n    });\n  }));\n};\n\nvar Worker = function (_a) {\n  var children = _a.children,\n      workerUrl = _a.workerUrl;\n  PdfJs__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\n  return React__default['default'].createElement(React__default['default'].Fragment, null, children);\n};\n\nexports.AnnotationType = AnnotationType$1;\nexports.Button = Button;\nexports.Icon = Icon;\nexports.LayerRenderStatus = LayerRenderStatus$1;\nexports.LocalizationContext = LocalizationContext;\nexports.LocalizationProvider = LocalizationProvider;\nexports.Menu = Menu;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.Modal = Modal;\nexports.Observer = Observer;\nexports.Popover = Popover;\nexports.Position = Position$1;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.Separator = Separator;\nexports.SpecialZoomLevel = SpecialZoomLevel$1;\nexports.Spinner = Spinner;\nexports.Tooltip = Tooltip;\nexports.Viewer = Viewer;\nexports.Worker = Worker;\nexports.createStore = createStore;","map":{"version":3,"sources":["/Users/phipson/Documents/GitProjects/phipson.github.io/webv5/node_modules/@react-pdf-viewer/core/lib/cjs/core.js"],"names":["Object","defineProperty","exports","value","React","require","PdfJs","_interopDefaultLegacy","e","_interopNamespace","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__default","PdfJs__namespace","AnnotationType","AnnotationType$1","ThemeContext","createContext","prefixClass","classNames","classes","result","clazz","push","join","Button","_a","_b","children","_c","isSelected","onClick","theme","useContext","createElement","className","Menu","MenuDivider","Icon","size","width","height","viewBox","CheckIcon","MenuItem","checked","icon","PrimaryButton","ProgressBar","progress","style","Separator","Spinner","cx","cy","r","strokeDasharray","Math","PI","Observer","threshold","onVisibilityChanged","containerRef","useRef","useLayoutEffect","io","IntersectionObserver","entries","entry","isVisible","isIntersecting","ratio","intersectionRatio","container","current","observe","unobserve","ref","LocalizationContext","core","askingPassword","requirePasswordToOpen","submit","wrongPassword","tryAgain","enUs","LocalizationProvider","localization","defaultL10n","useState","l10nData","setL10nData","setLocalization","l10n","Provider","useClickOutside","closeOnClickOutside","targetRef","onClickOutside","clickHandler","target","contains","useEffect","document","addEventListener","removeEventListener","useKeyUp","targetKeyCode","handler","keyUpHandler","keyCode","useLockScroll","originalStyle","window","getComputedStyle","body","overflow","ModalBody","closeOnEscape","onToggle","contentRef","createRef","ModalOverlay","ToggleStatus","useToggle","opened","setOpened","toggle","status","Close","Open","Toggle","isOpened","Portal","content","Fragment","Modal","renderContent","Position","Position$1","calculatePosition","position","offset","targetRect","getBoundingClientRect","contentRect","top","left","TopLeft","TopCenter","TopRight","RightTop","RightCenter","RightBottom","BottomLeft","BottomCenter","BottomRight","LeftTop","LeftCenter","LeftBottom","usePosition","anchorRef","targetEle","contentEle","anchorEle","anchorRect","Arrow","customClassName","PopoverBody","onClose","PopoverOverlay","Popover","renderTarget","TooltipBody","Tooltip","show","hide","onMouseEnter","onMouseLeave","SpecialZoomLevel","SpecialZoomLevel$1","extendStatics","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","__assign","assign","t","s","i","arguments","length","call","apply","createStore","initialState","state","listeners","subscribe","key","concat","unsubscribe","filter","f","update","data","LayerRenderStatus","LayerRenderStatus$1","AnnotationBorderStyleType","AnnotationBorderStyleType$1","dateRegex","RegExp","parse","min","max","defaultValue","parsed","parseInt","convertDate","input","matches","exec","year","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","Date","UTC","PopupWrapper","annotation","dateStr","modificationDate","date","toLocaleDateString","toLocaleTimeString","annotationType","Popup","title","contents","split","map","item","index","TogglePopupBy","useTogglePopup","Hover","togglePopupBy","setTooglePopupBy","toggleOnClick","Click","openOnHover","closeOnHover","Annotation","ignoreBorder","hasPopup","isRenderable","page","viewport","rect","normalizeRect","bound","view","styles","borderColor","borderRadius","borderStyle","borderWidth","Dashed","Solid","Underline","borderBottomStyle","Beveled","Inset","horizontalCornerRadius","verticalCornerRadius","color","popup","slot","attrs","transform","transformOrigin","Caret","props","id","Circle","preserveAspectRatio","version","fill","rx","ry","stroke","strokeWidth","fileName","url","str","pop","downloadFile","blobUrl","URL","createObjectURL","Blob","type","link","display","href","setAttribute","appendChild","click","removeChild","revokeObjectURL","FileAttachment","doubleClick","file","filename","onDoubleClick","FreeText","Highlight","Ink","inkLists","inkList","points","x","y","Line","x1","lineCoordinates","x2","y1","y2","parse$1","pageIndex","destArray","bottomOffset","scale","name","scaleTo","PageFit","getDestination","doc","dest","Promise","res","resolve","then","getPageIndex","Link","onExecuteNamedAction","onJumpToDest","preventDefault","action","rel","newWindow","Polygon","vertices","Polyline","ignoredParents","parentType","indexOf","parentId","parent","querySelector","parseFloat","Square","Squiggly","Stamp","StrikeOut","CommentIcon","HelpIcon","KeyIcon","NoteIcon","ParagraphIcon","TriangleIcon","Text","childAnnotation","toLowerCase","AnnotationLayerBody","annotations","plugins","rotation","getViewport","clonedViewPort","clone","dontFlip","filterAnnotations","plugin","onAnnotationLayerRender","find","AnnotationLoader","renderAnnotations","loading","setStatus","getAnnotations","intent","AnnotationLayer","WithScale","callback","CanvasLayer","canvasRef","renderTask","devicePixelRatio","renderCanvas","task","cancel","canvasEle","onCanvasLayerRender","ele","PreRender","opacity","canvasContext","getContext","alpha","render","promise","removeProperty","DidRender","SvgLayer","empty","containerEle","innerHTML","renderSvg","getOperatorList","operatorList","graphic","SVGGraphics","commonObjs","objs","getSVG","svg","TextLayer","spans","querySelectorAll","numSpans","span","renderText","onTextLayerRender","getTextContent","textContent","renderTextLayer","childNodes","classList","add","NUMBER_OF_OVERSCAN_PAGES","PageLayer","currentPage","renderPage","onPageVisibilityChanged","pageHeight","pageWidth","viewportRotation","pageSize","setPageSize","prevIsCalculated","intersectionThreshold","_","scaledWidth","scaledHeight","isVertical","abs","w","h","determinePageSize","getPage","pdfPage","visibilityChanged","params","defaultPageRenderer","canvasLayer","textLayer","annotationLayer","renderPageLayer","rotationNumber","svgLayer","getFileExt","SCROLL_BAR_WIDTH","PAGE_PADDING","Inner","defaultScale","initialPage","viewerState","onDocumentLoad","onOpenFile","onPageChange","onZoom","pagesRef","setScale","setCurrentPage","_d","setRotation","stateRef","numPages","arr","pageVisibility","pageRefs","setViewerState","newState","onViewerStateChange","getPagesRef","getViewerState","jumpToDestination","leftOffset","pagesContainer","currentState","newPageIndex","bottom","zoom","targetPageEle","scrollTop","offsetTop","scrollLeft","offsetLeft","jumpToPage","targetPage","openFile","reader","FileReader","readAsArrayBuffer","onload","bytes","Uint8Array","rotate","updateRotation","newScale","pagesEle","updateScale","ActualSize","clientWidth","clientHeight","PageWidth","getPluginMethods","pluginMethods","install","uninstall","pageVisibilityChanged","maxRatioPage","reduce","maxIndex","array","executeNamedAction","previousPage","nextPage","renderViewer","subSlot","renderSlot","LEVELS","decrease","currentLevel","found","findIndex","PageSizeCalculator","scaled","LoadingStatus","AskForPasswordState","_super","verifyPasswordFn","_this","AskingPassword","password","setPassword","changePassword","onChange","CompletedState","FailureState","error","LoadingState","percentages","WrongPassword","WrongPasswordState","DocumentLoader","authorization","characterMap","httpHeaders","renderError","renderLoader","setPercentages","loadedDocument","setLoadedDocument","cMapUrl","cMapPacked","isCompressed","withCredentials","loadingTask","getDocument","onPassword","verifyPassword","reason","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","onProgress","total","loaded","err","message","destroy","ThemeProvider","Viewer","fileUrl","_e","_f","_g","_h","setFile","ps","Worker","workerUrl","GlobalWorkerOptions","workerSrc"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar React = require('react');\nvar PdfJs = require('pdfjs-dist');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nfunction _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () {\n                        return e[k];\n                    }\n                });\n            }\n        });\n    }\n    n['default'] = e;\n    return Object.freeze(n);\n}\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\nvar PdfJs__namespace = /*#__PURE__*/_interopNamespace(PdfJs);\n\nvar AnnotationType;\n(function (AnnotationType) {\n    AnnotationType[AnnotationType[\"Text\"] = 1] = \"Text\";\n    AnnotationType[AnnotationType[\"Link\"] = 2] = \"Link\";\n    AnnotationType[AnnotationType[\"FreeText\"] = 3] = \"FreeText\";\n    AnnotationType[AnnotationType[\"Line\"] = 4] = \"Line\";\n    AnnotationType[AnnotationType[\"Square\"] = 5] = \"Square\";\n    AnnotationType[AnnotationType[\"Circle\"] = 6] = \"Circle\";\n    AnnotationType[AnnotationType[\"Polygon\"] = 7] = \"Polygon\";\n    AnnotationType[AnnotationType[\"Polyline\"] = 8] = \"Polyline\";\n    AnnotationType[AnnotationType[\"Highlight\"] = 9] = \"Highlight\";\n    AnnotationType[AnnotationType[\"Underline\"] = 10] = \"Underline\";\n    AnnotationType[AnnotationType[\"Squiggly\"] = 11] = \"Squiggly\";\n    AnnotationType[AnnotationType[\"StrikeOut\"] = 12] = \"StrikeOut\";\n    AnnotationType[AnnotationType[\"Stamp\"] = 13] = \"Stamp\";\n    AnnotationType[AnnotationType[\"Caret\"] = 14] = \"Caret\";\n    AnnotationType[AnnotationType[\"Ink\"] = 15] = \"Ink\";\n    AnnotationType[AnnotationType[\"Popup\"] = 16] = \"Popup\";\n    AnnotationType[AnnotationType[\"FileAttachment\"] = 17] = \"FileAttachment\";\n})(AnnotationType || (AnnotationType = {}));\nvar AnnotationType$1 = AnnotationType;\n\nvar ThemeContext = React__default['default'].createContext({\n    prefixClass: 'rpv-core',\n});\n\nvar classNames = function (classes) {\n    var result = [];\n    Object.keys(classes).forEach(function (clazz) {\n        if (clazz && classes[clazz]) {\n            result.push(clazz);\n        }\n    });\n    return result.join(' ');\n};\n\nvar Button = function (_a) {\n    var _b;\n    var children = _a.children, _c = _a.isSelected, isSelected = _c === void 0 ? false : _c, onClick = _a.onClick;\n    var theme = React.useContext(ThemeContext);\n    return (React__default['default'].createElement(\"button\", { className: classNames((_b = {},\n            _b[theme.prefixClass + \"-button\"] = true,\n            _b[theme.prefixClass + \"-button-selected\"] = isSelected,\n            _b)), onClick: onClick }, children));\n};\n\nvar Menu = function (_a) {\n    var children = _a.children;\n    var theme = React.useContext(ThemeContext);\n    return (React__default['default'].createElement(\"ul\", { className: theme.prefixClass + \"-menu\" }, children));\n};\n\nvar MenuDivider = function () {\n    var theme = React.useContext(ThemeContext);\n    return (React__default['default'].createElement(\"li\", { className: theme.prefixClass + \"-menu-divider\" }));\n};\n\nvar Icon = function (_a) {\n    var children = _a.children, _b = _a.size, size = _b === void 0 ? 24 : _b;\n    var theme = React.useContext(ThemeContext);\n    var width = (size || 24) + \"px\";\n    return (React__default['default'].createElement(\"svg\", { className: theme.prefixClass + \"-icon\", height: width, viewBox: \"0 0 24 24\", width: width }, children));\n};\n\nvar CheckIcon = function () {\n    return (React__default['default'].createElement(Icon, { size: 16 },\n        React__default['default'].createElement(\"path\", { d: \"M23.5,0.499l-16.5,23l-6.5-6.5\" })));\n};\n\nvar MenuItem = function (_a) {\n    var _b = _a.checked, checked = _b === void 0 ? false : _b, children = _a.children, _c = _a.icon, icon = _c === void 0 ? null : _c, onClick = _a.onClick;\n    var theme = React.useContext(ThemeContext);\n    return (React__default['default'].createElement(\"li\", { className: theme.prefixClass + \"-menu-item\", onClick: onClick },\n        React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-menu-item-icon\" }, icon),\n        React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-menu-item-label\" }, children),\n        React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-menu-item-check\" }, checked && React__default['default'].createElement(CheckIcon, null))));\n};\n\nvar PrimaryButton = function (_a) {\n    var children = _a.children, onClick = _a.onClick;\n    var theme = React.useContext(ThemeContext);\n    return (React__default['default'].createElement(\"button\", { className: theme.prefixClass + \"-primary-button\", onClick: onClick }, children));\n};\n\nvar ProgressBar = function (_a) {\n    var progress = _a.progress;\n    var theme = React.useContext(ThemeContext);\n    return (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-progress-bar\" },\n        React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-progress-bar-inner\", style: { width: progress + \"%\" } },\n            progress,\n            \"%\")));\n};\n\nvar Separator = function () {\n    var theme = React.useContext(ThemeContext);\n    return (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-separator\" }));\n};\n\nvar Spinner = function () {\n    var theme = React.useContext(ThemeContext);\n    return (React__default['default'].createElement(\"svg\", { className: theme.prefixClass + \"-spinner\", width: \"64px\", height: \"64px\", viewBox: \"0 0 32 32\" },\n        React__default['default'].createElement(\"circle\", { className: theme.prefixClass + \"-spinner-circle\", cx: \"16\", cy: \"16\", r: \"12\", strokeDasharray: Math.PI * 2 * 9 })));\n};\n\nvar Observer = function (_a) {\n    var children = _a.children, threshold = _a.threshold, onVisibilityChanged = _a.onVisibilityChanged;\n    var containerRef = React.useRef(null);\n    React.useLayoutEffect(function () {\n        var io = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entry) {\n                var isVisible = entry.isIntersecting;\n                var ratio = entry.intersectionRatio;\n                onVisibilityChanged({ isVisible: isVisible, ratio: ratio });\n            });\n        }, {\n            threshold: threshold || 0,\n        });\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        io.observe(container);\n        return function () {\n            io.unobserve(container);\n        };\n    }, []);\n    return (React__default['default'].createElement(\"div\", { ref: containerRef }, children));\n};\n\nvar LocalizationContext = React__default['default'].createContext({});\n\nvar core = {\n\taskingPassword: {\n\t\trequirePasswordToOpen: \"This document requires a password to open\",\n\t\tsubmit: \"Submit\"\n\t},\n\twrongPassword: {\n\t\tsubmit: \"Submit\",\n\t\ttryAgain: \"The password is wrong. Please try again\"\n\t}\n};\nvar enUs = {\n\tcore: core\n};\n\nvar LocalizationProvider = function (_a) {\n    var children = _a.children, localization = _a.localization;\n    var defaultL10n = enUs;\n    var _b = React.useState(localization || defaultL10n), l10nData = _b[0], setL10nData = _b[1];\n    var setLocalization = function (l10n) { return setL10nData(l10n); };\n    return (React__default['default'].createElement(LocalizationContext.Provider, { value: l10nData }, children(setLocalization)));\n};\n\nvar useClickOutside = function (closeOnClickOutside, targetRef, onClickOutside) {\n    var clickHandler = function (e) {\n        var target = targetRef.current;\n        if (target && !target.contains(e.target)) {\n            onClickOutside();\n        }\n    };\n    React.useEffect(function () {\n        if (!closeOnClickOutside) {\n            return;\n        }\n        document.addEventListener('click', clickHandler);\n        return function () {\n            document.removeEventListener('click', clickHandler);\n        };\n    }, []);\n};\n\nvar useKeyUp = function (targetKeyCode, handler) {\n    var keyUpHandler = function (e) {\n        e.keyCode === targetKeyCode && handler();\n    };\n    React.useEffect(function () {\n        document.addEventListener('keyup', keyUpHandler);\n        return function () {\n            document.removeEventListener('keyup', keyUpHandler);\n        };\n    }, []);\n};\n\nvar useLockScroll = function () {\n    React.useEffect(function () {\n        var originalStyle = window.getComputedStyle(document.body).overflow;\n        document.body.style.overflow = 'hidden';\n        return function () {\n            document.body.style.overflow = originalStyle;\n        };\n    }, []);\n};\n\nvar ModalBody = function (_a) {\n    var children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, onToggle = _a.onToggle;\n    var theme = React.useContext(ThemeContext);\n    var contentRef = React.createRef();\n    useLockScroll();\n    useKeyUp(27, function () { return closeOnEscape && onToggle(); });\n    useClickOutside(closeOnClickOutside, contentRef, onToggle);\n    return (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-modal-body\", ref: contentRef }, children));\n};\n\nvar ModalOverlay = function (_a) {\n    var children = _a.children;\n    var theme = React.useContext(ThemeContext);\n    return (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-modal-overlay\" }, children));\n};\n\nvar ToggleStatus;\n(function (ToggleStatus) {\n    ToggleStatus[\"Close\"] = \"Close\";\n    ToggleStatus[\"Open\"] = \"Open\";\n    ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(ToggleStatus || (ToggleStatus = {}));\nvar useToggle = function () {\n    var _a = React.useState(false), opened = _a[0], setOpened = _a[1];\n    var toggle = function (status) {\n        switch (status) {\n            case ToggleStatus.Close:\n                setOpened(false);\n                break;\n            case ToggleStatus.Open:\n                setOpened(true);\n                break;\n            case ToggleStatus.Toggle:\n            default:\n                setOpened(function (isOpened) { return !isOpened; });\n                break;\n        }\n    };\n    return { opened: opened, toggle: toggle };\n};\n\nvar Portal = function (_a) {\n    var content = _a.content, target = _a.target;\n    var _b = useToggle(), opened = _b.opened, toggle = _b.toggle;\n    return (React__default['default'].createElement(React__default['default'].Fragment, null,\n        target(toggle, opened),\n        opened && content(toggle)));\n};\n\nvar Modal = function (_a) {\n    var closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, target = _a.target;\n    var renderContent = function (toggle) { return (React__default['default'].createElement(ModalOverlay, null,\n        React__default['default'].createElement(ModalBody, { closeOnClickOutside: closeOnClickOutside, closeOnEscape: closeOnEscape, onToggle: toggle }, content(toggle)))); };\n    return (React__default['default'].createElement(Portal, { target: target, content: renderContent }));\n};\n\nvar Position;\n(function (Position) {\n    Position[\"TopLeft\"] = \"TOP_LEFT\";\n    Position[\"TopCenter\"] = \"TOP_CENTER\";\n    Position[\"TopRight\"] = \"TOP_RIGHT\";\n    Position[\"RightTop\"] = \"RIGHT_TOP\";\n    Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n    Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n    Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n    Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n    Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n    Position[\"LeftTop\"] = \"LEFT_TOP\";\n    Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n    Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(Position || (Position = {}));\nvar Position$1 = Position;\n\nvar calculatePosition = function (content, target, position, offset) {\n    var targetRect = target.getBoundingClientRect();\n    var contentRect = content.getBoundingClientRect();\n    var height = contentRect.height, width = contentRect.width;\n    var top = 0;\n    var left = 0;\n    switch (position) {\n        case Position$1.TopLeft:\n            top = targetRect.top - height;\n            left = targetRect.left;\n            break;\n        case Position$1.TopCenter:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case Position$1.TopRight:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case Position$1.RightTop:\n            top = targetRect.top;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.RightCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.RightBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.BottomLeft:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left;\n            break;\n        case Position$1.BottomCenter:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case Position$1.BottomRight:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case Position$1.LeftTop:\n            top = targetRect.top;\n            left = targetRect.left - width;\n            break;\n        case Position$1.LeftCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left - width;\n            break;\n        case Position$1.LeftBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left - width;\n            break;\n    }\n    return {\n        left: left + (offset.left || 0),\n        top: top + (offset.top || 0),\n    };\n};\n\nvar usePosition = function (contentRef, targetRef, anchorRef, position, offset) {\n    React.useLayoutEffect(function () {\n        var targetEle = targetRef.current;\n        var contentEle = contentRef.current;\n        var anchorEle = anchorRef.current;\n        if (!contentEle || !targetEle || !anchorEle) {\n            return;\n        }\n        var anchorRect = anchorEle.getBoundingClientRect();\n        var _a = calculatePosition(contentEle, targetEle, position, offset), top = _a.top, left = _a.left;\n        contentEle.style.top = top - anchorRect.top + \"px\";\n        contentEle.style.left = left - anchorRect.left + \"px\";\n    }, []);\n};\n\nvar Arrow = function (_a) {\n    var _b;\n    var customClassName = _a.customClassName, position = _a.position;\n    var theme = React.useContext(ThemeContext);\n    return (React__default['default'].createElement(\"div\", { className: classNames((_b = {},\n            _b[theme.prefixClass + \"-arrow\"] = true,\n            _b[theme.prefixClass + \"-arrow-tl\"] = position === Position$1.TopLeft,\n            _b[theme.prefixClass + \"-arrow-tc\"] = position === Position$1.TopCenter,\n            _b[theme.prefixClass + \"-arrow-tr\"] = position === Position$1.TopRight,\n            _b[theme.prefixClass + \"-arrow-rt\"] = position === Position$1.RightTop,\n            _b[theme.prefixClass + \"-arrow-rc\"] = position === Position$1.RightCenter,\n            _b[theme.prefixClass + \"-arrow-rb\"] = position === Position$1.RightBottom,\n            _b[theme.prefixClass + \"-arrow-bl\"] = position === Position$1.BottomLeft,\n            _b[theme.prefixClass + \"-arrow-bc\"] = position === Position$1.BottomCenter,\n            _b[theme.prefixClass + \"-arrow-br\"] = position === Position$1.BottomRight,\n            _b[theme.prefixClass + \"-arrow-lt\"] = position === Position$1.LeftTop,\n            _b[theme.prefixClass + \"-arrow-lc\"] = position === Position$1.LeftCenter,\n            _b[theme.prefixClass + \"-arrow-lb\"] = position === Position$1.LeftBottom,\n            _b[\"\" + customClassName] = customClassName !== '',\n            _b)) }));\n};\n\nvar PopoverBody = function (_a) {\n    var children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, offset = _a.offset, position = _a.position, targetRef = _a.targetRef, onClose = _a.onClose;\n    var theme = React.useContext(ThemeContext);\n    var contentRef = React.createRef();\n    var anchorRef = React.createRef();\n    useClickOutside(closeOnClickOutside, contentRef, onClose);\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    return (React__default['default'].createElement(React__default['default'].Fragment, null,\n        React__default['default'].createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-popover-body\", ref: contentRef },\n            React__default['default'].createElement(Arrow, { customClassName: theme.prefixClass + \"-popover-body-arrow\", position: position }),\n            children)));\n};\n\nvar PopoverOverlay = function (_a) {\n    var closeOnEscape = _a.closeOnEscape, onClose = _a.onClose;\n    var theme = React.useContext(ThemeContext);\n    useKeyUp(27, function () { return closeOnEscape && onClose(); });\n    return (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-popover-overlay\" }));\n};\n\nvar Popover = function (_a) {\n    var closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var targetRef = React__default['default'].createRef();\n    var renderTarget = function (toggle, opened) { return (React__default['default'].createElement(\"div\", { ref: targetRef }, target(toggle, opened))); };\n    var renderContent = function (toggle) { return (React__default['default'].createElement(React__default['default'].Fragment, null,\n        React__default['default'].createElement(PopoverOverlay, { closeOnEscape: closeOnEscape, onClose: toggle }),\n        React__default['default'].createElement(PopoverBody, { closeOnClickOutside: closeOnClickOutside, offset: offset, position: position, targetRef: targetRef, onClose: toggle }, content(toggle)))); };\n    return (React__default['default'].createElement(Portal, { content: renderContent, target: renderTarget }));\n};\n\nvar TooltipBody = function (_a) {\n    var children = _a.children, offset = _a.offset, position = _a.position, targetRef = _a.targetRef;\n    var theme = React.useContext(ThemeContext);\n    var contentRef = React.createRef();\n    var anchorRef = React.createRef();\n    usePosition(contentRef, targetRef, anchorRef, position, offset);\n    return (React__default['default'].createElement(React__default['default'].Fragment, null,\n        React__default['default'].createElement(\"div\", { ref: anchorRef, style: { left: 0, position: 'absolute', top: 0 } }),\n        React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-tooltip-body\", ref: contentRef },\n            React__default['default'].createElement(Arrow, { customClassName: theme.prefixClass + \"-tooltip-body-arrow\", position: position }),\n            React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-tooltip-body-content\" }, children))));\n};\n\nvar Tooltip = function (_a) {\n    var content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var targetRef = React__default['default'].createRef();\n    var renderTarget = function (toggle) {\n        var show = function () { toggle(ToggleStatus.Open); };\n        var hide = function () { toggle(ToggleStatus.Close); };\n        return (React__default['default'].createElement(\"div\", { ref: targetRef, onMouseEnter: show, onMouseLeave: hide }, target));\n    };\n    var renderContent = function () { return (React__default['default'].createElement(TooltipBody, { offset: offset, position: position, targetRef: targetRef }, content())); };\n    return (React__default['default'].createElement(Portal, { target: renderTarget, content: renderContent }));\n};\n\nvar SpecialZoomLevel;\n(function (SpecialZoomLevel) {\n    SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n    SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n    SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(SpecialZoomLevel || (SpecialZoomLevel = {}));\nvar SpecialZoomLevel$1 = SpecialZoomLevel;\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction createStore(initialState) {\n    var state = initialState || {};\n    var listeners = {};\n    return {\n        subscribe: function (key, handler) {\n            listeners[key] = (listeners[key] || []).concat(handler);\n        },\n        unsubscribe: function (key, handler) {\n            listeners[key] = (listeners[key] || []).filter(function (f) { return f !== handler; });\n        },\n        update: function (key, data) {\n            var _a;\n            state = __assign(__assign({}, state), (_a = {}, _a[key] = data, _a));\n            (listeners[key] || []).forEach(function (handler) { return handler(state[key]); });\n        },\n        get: function (key) {\n            return state[key];\n        },\n    };\n}\n\nvar LayerRenderStatus;\n(function (LayerRenderStatus) {\n    LayerRenderStatus[LayerRenderStatus[\"PreRender\"] = 0] = \"PreRender\";\n    LayerRenderStatus[LayerRenderStatus[\"DidRender\"] = 1] = \"DidRender\";\n})(LayerRenderStatus || (LayerRenderStatus = {}));\nvar LayerRenderStatus$1 = LayerRenderStatus;\n\nvar AnnotationBorderStyleType;\n(function (AnnotationBorderStyleType) {\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Solid\"] = 1] = \"Solid\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Dashed\"] = 2] = \"Dashed\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Beveled\"] = 3] = \"Beveled\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Inset\"] = 4] = \"Inset\";\n    AnnotationBorderStyleType[AnnotationBorderStyleType[\"Underline\"] = 5] = \"Underline\";\n})(AnnotationBorderStyleType || (AnnotationBorderStyleType = {}));\nvar AnnotationBorderStyleType$1 = AnnotationBorderStyleType;\n\nvar dateRegex = new RegExp('^D:' +\n    '(\\\\d{4})' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '([Z|+|-])?' +\n    '(\\\\d{2})?' +\n    \"'?\" +\n    '(\\\\d{2})?' +\n    \"'?\");\nvar parse = function (value, min, max, defaultValue) {\n    var parsed = parseInt(value, 10);\n    return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\nvar convertDate = function (input) {\n    var matches = dateRegex.exec(input);\n    if (!matches) {\n        return null;\n    }\n    var year = parseInt(matches[1], 10);\n    var month = parse(matches[2], 1, 12, 1) - 1;\n    var day = parse(matches[3], 1, 31, 1);\n    var hour = parse(matches[4], 0, 23, 0);\n    var minute = parse(matches[5], 0, 59, 0);\n    var second = parse(matches[6], 0, 59, 0);\n    var universalTimeRelation = matches[7] || 'Z';\n    var offsetHour = parse(matches[8], 0, 23, 0);\n    var offsetMinute = parse(matches[9], 0, 59, 0);\n    switch (universalTimeRelation) {\n        case '-':\n            hour += offsetHour;\n            minute += offsetMinute;\n            break;\n        case '+':\n            hour -= offsetHour;\n            minute -= offsetMinute;\n            break;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar PopupWrapper = function (_a) {\n    var annotation = _a.annotation;\n    var theme = React.useContext(ThemeContext);\n    var dateStr = '';\n    if (annotation.modificationDate) {\n        var date = convertDate(annotation.modificationDate);\n        dateStr = date ? date.toLocaleDateString() + \", \" + date.toLocaleTimeString() : '';\n    }\n    return (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-annotation-popup-wrapper\", style: {\n            top: annotation.annotationType === AnnotationType$1.Popup ? '' : '100%',\n        } },\n        (annotation.title) && (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-annotation-popup-wrapper-header\" },\n            React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-annotation-popup-wrapper-title\" }, annotation.title),\n            React__default['default'].createElement(\"span\", { className: theme.prefixClass + \"-annotation-popup-wrapper-date\" }, dateStr))),\n        annotation.contents && (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-annotation-popup-wrapper-content\" }, annotation.contents.split('\\n').map(function (item, index) { return React__default['default'].createElement(React.Fragment, { key: index },\n            item,\n            React__default['default'].createElement(\"br\", null)); })))));\n};\n\nvar TogglePopupBy;\n(function (TogglePopupBy) {\n    TogglePopupBy[\"Click\"] = \"Click\";\n    TogglePopupBy[\"Hover\"] = \"Hover\";\n})(TogglePopupBy || (TogglePopupBy = {}));\nvar useTogglePopup = function () {\n    var _a = useToggle(), opened = _a.opened, toggle = _a.toggle;\n    var _b = React.useState(TogglePopupBy.Hover), togglePopupBy = _b[0], setTooglePopupBy = _b[1];\n    var toggleOnClick = function () {\n        switch (togglePopupBy) {\n            case TogglePopupBy.Click:\n                opened && setTooglePopupBy(TogglePopupBy.Hover);\n                toggle(ToggleStatus.Toggle);\n                break;\n            case TogglePopupBy.Hover:\n                setTooglePopupBy(TogglePopupBy.Click);\n                toggle(ToggleStatus.Open);\n                break;\n        }\n    };\n    var openOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Open);\n    };\n    var closeOnHover = function () {\n        togglePopupBy === TogglePopupBy.Hover && toggle(ToggleStatus.Close);\n    };\n    return {\n        opened: opened,\n        closeOnHover: closeOnHover,\n        openOnHover: openOnHover,\n        toggleOnClick: toggleOnClick,\n    };\n};\n\nvar Annotation = function (_a) {\n    var annotation = _a.annotation, children = _a.children, ignoreBorder = _a.ignoreBorder, hasPopup = _a.hasPopup, isRenderable = _a.isRenderable, page = _a.page, viewport = _a.viewport;\n    var rect = annotation.rect;\n    var _b = useTogglePopup(), closeOnHover = _b.closeOnHover, opened = _b.opened, openOnHover = _b.openOnHover, toggleOnClick = _b.toggleOnClick;\n    var normalizeRect = function (r) { return [\n        Math.min(r[0], r[2]),\n        Math.min(r[1], r[3]),\n        Math.max(r[0], r[2]),\n        Math.max(r[1], r[3]),\n    ]; };\n    var bound = normalizeRect([\n        rect[0],\n        page.view[3] + page.view[1] - rect[1],\n        rect[2],\n        page.view[3] + page.view[1] - rect[3],\n    ]);\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var styles = {\n        borderColor: '',\n        borderRadius: '',\n        borderStyle: '',\n        borderWidth: '',\n    };\n    if (!ignoreBorder && annotation.borderStyle.width > 0) {\n        switch (annotation.borderStyle.style) {\n            case AnnotationBorderStyleType$1.Dashed:\n                styles.borderStyle = 'dashed';\n                break;\n            case AnnotationBorderStyleType$1.Solid:\n                styles.borderStyle = 'solid';\n                break;\n            case AnnotationBorderStyleType$1.Underline:\n                styles = Object.assign({\n                    borderBottomStyle: 'solid',\n                }, styles);\n                break;\n            case AnnotationBorderStyleType$1.Beveled:\n            case AnnotationBorderStyleType$1.Inset:\n        }\n        var borderWidth = annotation.borderStyle.width;\n        styles.borderWidth = borderWidth + \"px\";\n        if (annotation.borderStyle.style !== AnnotationBorderStyleType$1.Underline) {\n            width = width - 2 * borderWidth;\n            height = height - 2 * borderWidth;\n        }\n        var _c = annotation.borderStyle, horizontalCornerRadius = _c.horizontalCornerRadius, verticalCornerRadius = _c.verticalCornerRadius;\n        if (horizontalCornerRadius > 0 || verticalCornerRadius > 0) {\n            styles.borderRadius = horizontalCornerRadius + \"px / \" + verticalCornerRadius + \"px\";\n        }\n        annotation.color\n            ? (styles.borderColor = \"rgb(\" + (annotation.color[0] | 0) + \", \" + (annotation.color[1] | 0) + \", \" + (annotation.color[2] | 0) + \")\")\n            : (styles.borderWidth = '0');\n    }\n    return (React__default['default'].createElement(React__default['default'].Fragment, null, isRenderable &&\n        children({\n            popup: {\n                opened: opened,\n                closeOnHover: closeOnHover,\n                openOnHover: openOnHover,\n                toggleOnClick: toggleOnClick,\n            },\n            slot: {\n                attrs: {\n                    style: Object.assign({\n                        height: height + \"px\",\n                        left: bound[0] + \"px\",\n                        top: bound[1] + \"px\",\n                        transform: \"matrix(\" + viewport.transform.join(',') + \")\",\n                        transformOrigin: \"-\" + bound[0] + \"px -\" + bound[1] + \"px\",\n                        width: width + \"px\",\n                    }, styles),\n                },\n                children: (React__default['default'].createElement(React__default['default'].Fragment, null, hasPopup && opened && (React__default['default'].createElement(PopupWrapper, { annotation: annotation })))),\n            }\n        })));\n};\n\nvar Caret = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-caret\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Circle = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-circle\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__default['default'].createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__default['default'].createElement(\"circle\", { cy: height / 2, fill: 'none', rx: width / 2 - borderWidth / 2, ry: height / 2 - borderWidth / 2, stroke: 'transparent', strokeWidth: borderWidth || 1 })),\n        props.slot.children)); }));\n};\n\nvar fileName = function (url) {\n    var str = url.split('/').pop();\n    return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n    var blobUrl = typeof data === 'string'\n        ? ''\n        : URL.createObjectURL(new Blob([data], { type: '' }));\n    var link = document.createElement('a');\n    link.style.display = 'none';\n    link.href = blobUrl || url;\n    link.setAttribute('download', fileName(url));\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    if (blobUrl) {\n        URL.revokeObjectURL(blobUrl);\n    }\n};\n\nvar FileAttachment = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false && (!!annotation.title || !!annotation.contents);\n    var doubleClick = function () {\n        var file = annotation.file;\n        file && downloadFile(file.filename, file.content);\n    };\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: true, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-file-attachment\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onDoubleClick: doubleClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar FreeText = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-free-text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Highlight = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-highlight\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Ink = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-ink\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.inkLists && annotation.inkLists.length && (React__default['default'].createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" }, annotation.inkLists.map(function (inkList, index) { return (React__default['default'].createElement(\"polyline\", { key: index, fill: 'none', stroke: 'transparent', strokeWidth: borderWidth || 1, points: inkList.map(function (item) { return item.x - rect[0] + \",\" + (rect[3] - item.y); }).join(' ') })); }))),\n        props.slot.children)); }));\n};\n\nvar Line = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-line\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__default['default'].createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__default['default'].createElement(\"line\", { stroke: 'transparent', strokeWidth: borderWidth || 1, x1: rect[2] - annotation.lineCoordinates[0], x2: rect[2] - annotation.lineCoordinates[2], y1: rect[3] - annotation.lineCoordinates[1], y2: rect[3] - annotation.lineCoordinates[3] })),\n        props.slot.children)); }));\n};\n\nvar parse$1 = function (pageIndex, destArray) {\n    var bottomOffset;\n    var scale;\n    switch (destArray[1].name) {\n        case 'XYZ':\n            bottomOffset = destArray[3];\n            scale = destArray[4];\n            return {\n                bottomOffset: bottomOffset,\n                pageIndex: pageIndex - 1,\n                scaleTo: scale,\n            };\n        case 'Fit':\n            return {\n                bottomOffset: 0,\n                pageIndex: pageIndex - 1,\n                scaleTo: SpecialZoomLevel$1.PageFit,\n            };\n        default:\n            return {\n                bottomOffset: 0,\n                pageIndex: pageIndex - 1,\n                scaleTo: 1,\n            };\n    }\n};\nvar getDestination = function (doc, dest) {\n    return new Promise(function (res) {\n        new Promise(function (resolve) {\n            if (typeof dest === 'string') {\n                doc.getDestination(dest).then(function (destArray) {\n                    resolve(destArray);\n                });\n            }\n            else {\n                resolve(dest);\n            }\n        }).then(function (destArray) {\n            doc.getPageIndex(destArray[0]).then(function (pageIndex) {\n                var target = parse$1(pageIndex, destArray);\n                res(target);\n            });\n        });\n    });\n};\n\nvar Link = function (_a) {\n    var annotation = _a.annotation, doc = _a.doc, page = _a.page, viewport = _a.viewport, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var theme = React.useContext(ThemeContext);\n    var link = function (e) {\n        e.preventDefault();\n        annotation.action\n            ? onExecuteNamedAction(annotation.action)\n            : getDestination(doc, annotation.dest).then(function (target) {\n                var pageIndex = target.pageIndex, bottomOffset = target.bottomOffset, scaleTo = target.scaleTo;\n                onJumpToDest(pageIndex + 1, bottomOffset, 0, scaleTo);\n            });\n    };\n    var isRenderable = !!(annotation.url || annotation.dest || annotation.action);\n    var attrs = annotation.url\n        ? {\n            href: annotation.url,\n            rel: 'noopener noreferrer nofollow',\n            target: annotation.newWindow ? '_blank' : '',\n            title: annotation.url,\n        }\n        : {\n            href: '',\n            onClick: link,\n        };\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: false, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-link\", \"data-annotation-id\": annotation.id }),\n        React__default['default'].createElement(\"a\", __assign({}, attrs)))); }));\n};\n\nvar Polygon = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-polygon\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__default['default'].createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__default['default'].createElement(\"polygon\", { fill: 'none', stroke: 'transparent', strokeWidth: borderWidth || 1, points: annotation.vertices.map(function (item) { return item.x - rect[0] + \",\" + (rect[3] - item.y); }).join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Polyline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-polyline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        annotation.vertices && annotation.vertices.length && (React__default['default'].createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__default['default'].createElement(\"polyline\", { fill: 'none', stroke: 'transparent', strokeWidth: borderWidth || 1, points: annotation.vertices.map(function (item) { return item.x - rect[0] + \",\" + (rect[3] - item.y); }).join(' ') }))),\n        props.slot.children)); }));\n};\n\nvar Popup = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var isRenderable = !!(annotation.title || annotation.contents);\n    var ignoredParents = ['Circle', 'Ink', 'Line', 'Polygon', 'PolyLine', 'Square'];\n    var hasPopup = !annotation.parentType || ignoredParents.indexOf(annotation.parentType) !== -1;\n    React.useLayoutEffect(function () {\n        if (!annotation.parentId) {\n            return;\n        }\n        var parent = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.parentId + \"\\\"]\");\n        var container = document.querySelector(\"[data-annotation-id=\\\"\" + annotation.id + \"\\\"]\");\n        if (!parent || !container) {\n            return;\n        }\n        var left = parseFloat(parent.style.left);\n        var top = parseFloat(parent.style.top) + parseFloat(parent.style.height);\n        container.style.left = left + \"px\";\n        container.style.top = top + \"px\";\n        container.style.transformOrigin = \"-\" + left + \"px -\" + top + \"px\";\n    }, []);\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-popup\", \"data-annotation-id\": annotation.id }),\n        React__default['default'].createElement(PopupWrapper, { annotation: annotation }))); }));\n};\n\nvar Square = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var rect = annotation.rect;\n    var width = rect[2] - rect[0];\n    var height = rect[3] - rect[1];\n    var borderWidth = annotation.borderStyle.width;\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-square\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n        React__default['default'].createElement(\"svg\", { height: height + \"px\", preserveAspectRatio: 'none', version: '1.1', viewBox: \"0 0 \" + width + \" \" + height, width: width + \"px\" },\n            React__default['default'].createElement(\"rect\", { height: height - borderWidth, fill: 'none', stroke: 'transparent', strokeWidth: borderWidth || 1, x: borderWidth / 2, y: borderWidth / 2, width: width - borderWidth })),\n        props.slot.children)); }));\n};\n\nvar Squiggly = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-squiggly\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar Stamp = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-stamp\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar StrikeOut = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-strike-out\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar CommentIcon = function () {\n    return (React__default['default'].createElement(Icon, { size: 16 },\n        React__default['default'].createElement(\"path\", { d: 'M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z' }),\n        React__default['default'].createElement(\"path\", { d: 'M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25' }),\n        React__default['default'].createElement(\"path\", { d: 'M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75' }),\n        React__default['default'].createElement(\"path\", { d: 'M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25' })));\n};\n\nvar HelpIcon = function () {\n    return (React__default['default'].createElement(Icon, { size: 16 },\n        React__default['default'].createElement(\"path\", { d: 'M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z' }),\n        React__default['default'].createElement(\"path\", { d: 'M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z' }),\n        React__default['default'].createElement(\"path\", { d: 'M21.423 5.406L17.415 9.414' }),\n        React__default['default'].createElement(\"path\", { d: 'M14.587 6.585L18.607 2.565' }),\n        React__default['default'].createElement(\"path\", { d: 'M5.405 21.424L9.413 17.416' }),\n        React__default['default'].createElement(\"path\", { d: 'M6.585 14.588L2.577 18.596' }),\n        React__default['default'].createElement(\"path\", { d: 'M18.602 21.419L14.595 17.412' }),\n        React__default['default'].createElement(\"path\", { d: 'M17.419 14.58L21.428 18.589' }),\n        React__default['default'].createElement(\"path\", { d: 'M2.582 5.399L6.588 9.406' }),\n        React__default['default'].createElement(\"path\", { d: 'M9.421 6.581L5.412 2.572' })));\n};\n\nvar KeyIcon = function () {\n    return (React__default['default'].createElement(Icon, { size: 16 },\n        React__default['default'].createElement(\"path\", { d: 'M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z' }),\n        React__default['default'].createElement(\"path\", { d: 'M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z' })));\n};\n\nvar NoteIcon = function () {\n    return (React__default['default'].createElement(Icon, { size: 16 },\n        React__default['default'].createElement(\"path\", { d: 'M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z' }),\n        React__default['default'].createElement(\"path\", { d: 'M6 4.5L6 0.5' }),\n        React__default['default'].createElement(\"path\", { d: 'M18 4.5L18 0.5' }),\n        React__default['default'].createElement(\"path\", { d: 'M10 4.5L10 0.5' }),\n        React__default['default'].createElement(\"path\", { d: 'M14 4.5L14 0.5' })));\n};\n\nvar ParagraphIcon = function () {\n    return (React__default['default'].createElement(Icon, { size: 16 },\n        React__default['default'].createElement(\"path\", { d: 'M17.5 0.498L17.5 23.498' }),\n        React__default['default'].createElement(\"path\", { d: 'M10.5 0.498L10.5 23.498' }),\n        React__default['default'].createElement(\"path\", { d: 'M23.5.5H6.5a6,6,0,0,0,0,12h4' })));\n};\n\nvar TriangleIcon = function () {\n    return (React__default['default'].createElement(Icon, { size: 16 },\n        React__default['default'].createElement(\"path\", { d: 'M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z' })));\n};\n\nvar Text = function (_a) {\n    var annotation = _a.annotation, childAnnotation = _a.childAnnotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    var name = annotation.name ? annotation.name.toLowerCase() : '';\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: false, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(React__default['default'].Fragment, null,\n        React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-text\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }),\n            name && (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-annotation-text-icon\" },\n                name === 'check' && React__default['default'].createElement(CheckIcon, null),\n                name === 'comment' && React__default['default'].createElement(CommentIcon, null),\n                name === 'help' && React__default['default'].createElement(HelpIcon, null),\n                name === 'insert' && React__default['default'].createElement(TriangleIcon, null),\n                name === 'key' && React__default['default'].createElement(KeyIcon, null),\n                name === 'note' && React__default['default'].createElement(NoteIcon, null),\n                (name === 'newparagraph' || name === 'paragraph') && React__default['default'].createElement(ParagraphIcon, null))),\n            props.slot.children),\n        childAnnotation && childAnnotation.annotationType === AnnotationType$1.Popup && props.popup.opened && (React__default['default'].createElement(Popup, { annotation: childAnnotation, page: page, viewport: viewport })))); }));\n};\n\nvar Underline = function (_a) {\n    var annotation = _a.annotation, page = _a.page, viewport = _a.viewport;\n    var theme = React.useContext(ThemeContext);\n    var hasPopup = annotation.hasPopup === false;\n    var isRenderable = !!(annotation.hasPopup || annotation.title || annotation.contents);\n    return (React__default['default'].createElement(Annotation, { annotation: annotation, hasPopup: hasPopup, ignoreBorder: true, isRenderable: isRenderable, page: page, viewport: viewport }, function (props) { return (React__default['default'].createElement(\"div\", __assign({}, props.slot.attrs, { className: theme.prefixClass + \"-annotation \" + theme.prefixClass + \"-annotation-underline\", \"data-annotation-id\": annotation.id, onClick: props.popup.toggleOnClick, onMouseEnter: props.popup.openOnHover, onMouseLeave: props.popup.closeOnHover }), props.slot.children)); }));\n};\n\nvar AnnotationLayerBody = function (_a) {\n    var annotations = _a.annotations, containerRef = _a.containerRef, doc = _a.doc, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var viewport = page.getViewport({ rotation: rotation, scale: scale });\n    var clonedViewPort = viewport.clone({ dontFlip: true });\n    var filterAnnotations = annotations.filter(function (annotation) { return !annotation.parentId; });\n    React.useEffect(function () {\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        plugins.forEach(function (plugin) {\n            if (plugin.onAnnotationLayerRender) {\n                plugin.onAnnotationLayerRender({\n                    annotations: filterAnnotations,\n                    container: container,\n                    pageIndex: pageIndex,\n                    rotation: rotation,\n                    scale: scale,\n                });\n            }\n        });\n    }, []);\n    return (React__default['default'].createElement(React__default['default'].Fragment, null, filterAnnotations\n        .map(function (annotation) {\n        var childAnnotation = annotations.find(function (item) { return item.parentId === annotation.id; });\n        switch (annotation.annotationType) {\n            case AnnotationType$1.Caret:\n                return (React__default['default'].createElement(Caret, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Circle:\n                return (React__default['default'].createElement(Circle, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.FileAttachment:\n                return (React__default['default'].createElement(FileAttachment, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.FreeText:\n                return (React__default['default'].createElement(FreeText, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Highlight:\n                return (React__default['default'].createElement(Highlight, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Ink:\n                return (React__default['default'].createElement(Ink, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Line:\n                return (React__default['default'].createElement(Line, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Link:\n                return (React__default['default'].createElement(Link, { key: annotation.id, annotation: annotation, doc: doc, page: page, viewport: clonedViewPort, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }));\n            case AnnotationType$1.Polygon:\n                return (React__default['default'].createElement(Polygon, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Polyline:\n                return (React__default['default'].createElement(Polyline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Popup:\n                return (React__default['default'].createElement(Popup, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Square:\n                return (React__default['default'].createElement(Square, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Squiggly:\n                return (React__default['default'].createElement(Squiggly, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Stamp:\n                return (React__default['default'].createElement(Stamp, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.StrikeOut:\n                return (React__default['default'].createElement(StrikeOut, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Text:\n                return (React__default['default'].createElement(Text, { key: annotation.id, annotation: annotation, childAnnotation: childAnnotation, page: page, viewport: clonedViewPort }));\n            case AnnotationType$1.Underline:\n                return (React__default['default'].createElement(Underline, { key: annotation.id, annotation: annotation, page: page, viewport: clonedViewPort }));\n            default:\n                return React__default['default'].createElement(React.Fragment, { key: annotation.id });\n        }\n    })));\n};\n\nvar AnnotationLoader = function (_a) {\n    var page = _a.page, renderAnnotations = _a.renderAnnotations;\n    var _b = React.useState({\n        loading: true,\n        annotations: [],\n    }), status = _b[0], setStatus = _b[1];\n    React.useEffect(function () {\n        page.getAnnotations({ intent: 'display' }).then(function (result) {\n            setStatus({\n                loading: false,\n                annotations: result,\n            });\n        });\n    }, []);\n    return (status.loading\n        ? React__default['default'].createElement(React__default['default'].Fragment, null)\n        : renderAnnotations(status.annotations));\n};\n\nvar AnnotationLayer = function (_a) {\n    var doc = _a.doc, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest;\n    var theme = React.useContext(ThemeContext);\n    var containerRef = React.createRef();\n    var renderAnnotations = function (annotations) {\n        return (React__default['default'].createElement(AnnotationLayerBody, { annotations: annotations, containerRef: containerRef, doc: doc, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotation, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }));\n    };\n    return (React__default['default'].createElement(\"div\", { ref: containerRef, className: theme.prefixClass + \"-annotation-layer\" },\n        React__default['default'].createElement(AnnotationLoader, { page: page, renderAnnotations: renderAnnotations })));\n};\n\nvar WithScale = function (_a) {\n    var callback = _a.callback, children = _a.children, rotation = _a.rotation, scale = _a.scale;\n    React.useLayoutEffect(function () {\n        callback();\n    }, [rotation, scale]);\n    return (React__default['default'].createElement(React__default['default'].Fragment, null, children));\n};\n\nvar CanvasLayer = function (_a) {\n    var height = _a.height, page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale, width = _a.width;\n    var theme = React.useContext(ThemeContext);\n    var canvasRef = React.createRef();\n    var renderTask = React.useRef();\n    var devicePixelRatio = window.devicePixelRatio || 1;\n    var renderCanvas = function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvasEle = canvasRef.current;\n        plugins.forEach(function (plugin) {\n            if (plugin.onCanvasLayerRender) {\n                plugin.onCanvasLayerRender({\n                    ele: canvasEle,\n                    pageIndex: pageIndex,\n                    rotation: rotation,\n                    scale: scale,\n                    status: LayerRenderStatus$1.PreRender,\n                });\n            }\n        });\n        canvasEle.height = height * devicePixelRatio;\n        canvasEle.width = width * devicePixelRatio;\n        canvasEle.style.opacity = '0';\n        var canvasContext = canvasEle.getContext('2d', { alpha: false });\n        var viewport = page.getViewport({ rotation: rotation, scale: scale * devicePixelRatio });\n        renderTask.current = page.render({ canvasContext: canvasContext, viewport: viewport });\n        renderTask.current.promise.then(function () {\n            canvasEle.style.removeProperty('opacity');\n            plugins.forEach(function (plugin) {\n                if (plugin.onCanvasLayerRender) {\n                    plugin.onCanvasLayerRender({\n                        ele: canvasEle,\n                        pageIndex: pageIndex,\n                        rotation: rotation,\n                        scale: scale,\n                        status: LayerRenderStatus$1.DidRender,\n                    });\n                }\n            });\n        }, function () { });\n    };\n    return (React__default['default'].createElement(WithScale, { callback: renderCanvas, rotation: rotation, scale: scale },\n        React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-canvas-layer\", style: {\n                height: height + \"px\",\n                width: width + \"px\",\n            } },\n            React__default['default'].createElement(\"canvas\", { ref: canvasRef, style: {\n                    transform: \"scale(\" + 1 / devicePixelRatio + \")\",\n                    transformOrigin: \"top left\",\n                } }))));\n};\n\nvar SvgLayer = function (_a) {\n    var height = _a.height, page = _a.page, rotation = _a.rotation, scale = _a.scale, width = _a.width;\n    var theme = React.useContext(ThemeContext);\n    var containerRef = React.createRef();\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        containerEle.innerHTML = '';\n    };\n    var renderSvg = function () {\n        var containerEle = containerRef.current;\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        page.getOperatorList().then(function (operatorList) {\n            empty();\n            var graphic = new PdfJs__namespace.SVGGraphics(page.commonObjs, page.objs);\n            graphic.getSVG(operatorList, viewport).then(function (svg) {\n                svg.style.height = height + \"px\";\n                svg.style.width = width + \"px\";\n                containerEle.appendChild(svg);\n            });\n        });\n    };\n    return (React__default['default'].createElement(WithScale, { callback: renderSvg, rotation: rotation, scale: scale },\n        React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-svg-layer\", ref: containerRef })));\n};\n\nvar TextLayer = function (_a) {\n    var page = _a.page, pageIndex = _a.pageIndex, plugins = _a.plugins, rotation = _a.rotation, scale = _a.scale;\n    var theme = React.useContext(ThemeContext);\n    var containerRef = React.createRef();\n    var renderTask = React.useRef();\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text\");\n        var numSpans = spans.length;\n        for (var i = 0; i < numSpans; i++) {\n            var span = spans[i];\n            containerEle.removeChild(span);\n        }\n    };\n    var renderText = function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        plugins.forEach(function (plugin) {\n            if (plugin.onTextLayerRender) {\n                plugin.onTextLayerRender({\n                    ele: containerEle,\n                    pageIndex: pageIndex,\n                    scale: scale,\n                    status: LayerRenderStatus$1.PreRender,\n                });\n            }\n        });\n        page.getTextContent().then(function (textContent) {\n            empty();\n            renderTask.current = PdfJs__namespace.renderTextLayer({\n                container: containerEle,\n                textContent: textContent,\n                viewport: viewport,\n            });\n            renderTask.current.promise.then(function () {\n                var spans = containerEle.childNodes;\n                var numSpans = spans.length;\n                for (var i = 0; i < numSpans; i++) {\n                    var span = spans[i];\n                    span.classList.add(theme.prefixClass + \"-text\");\n                }\n                plugins.forEach(function (plugin) {\n                    if (plugin.onTextLayerRender) {\n                        plugin.onTextLayerRender({\n                            ele: containerEle,\n                            pageIndex: pageIndex,\n                            scale: scale,\n                            status: LayerRenderStatus$1.DidRender,\n                        });\n                    }\n                });\n            }, function () { });\n        });\n    };\n    return (React__default['default'].createElement(WithScale, { callback: renderText, rotation: rotation, scale: scale },\n        React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-text-layer\", ref: containerRef })));\n};\n\nvar NUMBER_OF_OVERSCAN_PAGES = 2;\nvar PageLayer = function (_a) {\n    var currentPage = _a.currentPage, doc = _a.doc, height = _a.height, pageIndex = _a.pageIndex, plugins = _a.plugins, renderPage = _a.renderPage, rotation = _a.rotation, scale = _a.scale, width = _a.width, onExecuteNamedAction = _a.onExecuteNamedAction, onJumpToDest = _a.onJumpToDest, onPageVisibilityChanged = _a.onPageVisibilityChanged;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState({\n        page: null,\n        pageHeight: height,\n        pageWidth: width,\n        viewportRotation: 0,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var page = pageSize.page, pageHeight = pageSize.pageHeight, pageWidth = pageSize.pageWidth;\n    var prevIsCalculated = React.useRef(false);\n    var intersectionThreshold = Array(10).fill(null).map(function (_, i) { return i / 10; });\n    var scaledWidth = pageWidth * scale;\n    var scaledHeight = pageHeight * scale;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    var w = isVertical ? scaledWidth : scaledHeight;\n    var h = isVertical ? scaledHeight : scaledWidth;\n    var determinePageSize = function () {\n        if (prevIsCalculated.current) {\n            return;\n        }\n        prevIsCalculated.current = true;\n        doc.getPage(pageIndex + 1).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            setPageSize({\n                page: pdfPage,\n                pageHeight: viewport.height,\n                pageWidth: viewport.width,\n                viewportRotation: viewport.rotation,\n            });\n        });\n    };\n    var visibilityChanged = function (params) {\n        onPageVisibilityChanged(pageIndex, params.isVisible ? params.ratio : -1);\n        if (params.isVisible) {\n            determinePageSize();\n        }\n    };\n    var defaultPageRenderer = function (props) { return (React__default['default'].createElement(React__default['default'].Fragment, null,\n        props.canvasLayer.children,\n        props.textLayer.children,\n        props.annotationLayer.children)); };\n    var renderPageLayer = renderPage || defaultPageRenderer;\n    var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n    React.useEffect(function () {\n        if (currentPage - NUMBER_OF_OVERSCAN_PAGES <= pageIndex && pageIndex <= currentPage + NUMBER_OF_OVERSCAN_PAGES) {\n            determinePageSize();\n        }\n    }, [currentPage]);\n    return (React__default['default'].createElement(Observer, { onVisibilityChanged: visibilityChanged, threshold: intersectionThreshold },\n        React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-page-layer\", style: {\n                height: h + \"px\",\n                width: w + \"px\",\n            } }, !page\n            ? React__default['default'].createElement(Spinner, null)\n            : renderPageLayer({\n                annotationLayer: {\n                    attrs: {},\n                    children: (React__default['default'].createElement(AnnotationLayer, { doc: doc, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationNumber, scale: scale, onExecuteNamedAction: onExecuteNamedAction, onJumpToDest: onJumpToDest }))\n                },\n                canvasLayer: {\n                    attrs: {},\n                    children: (React__default['default'].createElement(CanvasLayer, { height: h, page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationNumber, scale: scale, width: w })),\n                },\n                doc: doc,\n                height: h,\n                pageIndex: pageIndex,\n                rotation: rotation,\n                scale: scale,\n                svgLayer: {\n                    attrs: {},\n                    children: (React__default['default'].createElement(SvgLayer, { height: h, page: page, rotation: rotationNumber, scale: scale, width: w })),\n                },\n                textLayer: {\n                    attrs: {},\n                    children: (React__default['default'].createElement(TextLayer, { page: page, pageIndex: pageIndex, plugins: plugins, rotation: rotationNumber, scale: scale }))\n                },\n                width: w,\n            }))));\n};\n\nvar getFileExt = function (url) {\n    var str = url.split(/\\./).pop();\n    return str ? str.toLowerCase() : '';\n};\n\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\nvar Inner = function (_a) {\n    var defaultScale = _a.defaultScale, doc = _a.doc, initialPage = _a.initialPage, pageSize = _a.pageSize, plugins = _a.plugins, renderPage = _a.renderPage, viewerState = _a.viewerState, onDocumentLoad = _a.onDocumentLoad, onOpenFile = _a.onOpenFile, onPageChange = _a.onPageChange, onZoom = _a.onZoom;\n    var theme = React.useContext(ThemeContext);\n    var containerRef = React.useRef(null);\n    var pagesRef = React.useRef(null);\n    var _b = React.useState(pageSize.scale), scale = _b[0], setScale = _b[1];\n    var _c = React.useState(0), currentPage = _c[0], setCurrentPage = _c[1];\n    var _d = React.useState(0), rotation = _d[0], setRotation = _d[1];\n    var stateRef = React.useRef(viewerState);\n    var numPages = doc.numPages;\n    var pageWidth = pageSize.pageWidth, pageHeight = pageSize.pageHeight;\n    var arr = Array(numPages).fill(null);\n    var pageVisibility = arr.map(function () { return 0; });\n    var pageRefs = arr.map(function () { return React.useRef(); });\n    var setViewerState = function (viewerState) {\n        var newState = viewerState;\n        plugins.forEach(function (plugin) {\n            if (plugin.onViewerStateChange) {\n                newState = plugin.onViewerStateChange(newState);\n            }\n        });\n        stateRef.current = newState;\n    };\n    var getPagesRef = function () { return pagesRef; };\n    var getViewerState = function () { return stateRef.current; };\n    var jumpToDestination = function (pageIndex, bottomOffset, leftOffset, scaleTo) {\n        var pagesContainer = pagesRef.current;\n        var currentState = stateRef.current;\n        if (!pagesContainer || !currentState) {\n            return;\n        }\n        var newPageIndex = pageIndex + 1;\n        doc.getPage(newPageIndex).then(function (page) {\n            var viewport = page.getViewport({ scale: 1 });\n            var top = 0;\n            var bottom = bottomOffset || 0;\n            var left = leftOffset || 0;\n            switch (scaleTo) {\n                case SpecialZoomLevel$1.PageFit:\n                    top = 0;\n                    left = 0;\n                    zoom(SpecialZoomLevel$1.PageFit);\n                    break;\n                default:\n                    top = (viewport.height - bottom) * currentState.scale;\n                    left = left * currentState.scale;\n                    break;\n            }\n            var targetPageEle = pageRefs[pageIndex].current;\n            if (targetPageEle) {\n                pagesContainer.scrollTop = targetPageEle.offsetTop + top;\n                pagesContainer.scrollLeft = targetPageEle.offsetLeft + left;\n            }\n        });\n    };\n    var jumpToPage = function (pageIndex) {\n        if (pageIndex < 0 || pageIndex >= numPages) {\n            return;\n        }\n        var pagesContainer = pagesRef.current;\n        var targetPage = pageRefs[pageIndex].current;\n        if (pagesContainer && targetPage) {\n            pagesContainer.scrollTop = targetPage.offsetTop;\n            pagesContainer.scrollLeft = targetPage.offsetLeft;\n        }\n        setCurrentPage(pageIndex);\n    };\n    var openFile = function (file) {\n        if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n            return;\n        }\n        new Promise(function (resolve) {\n            var reader = new FileReader();\n            reader.readAsArrayBuffer(file);\n            reader.onload = function () {\n                var bytes = new Uint8Array(reader.result);\n                resolve(bytes);\n            };\n        }).then(function (data) {\n            onOpenFile(file.name, data);\n        });\n    };\n    var rotate = function (updateRotation) {\n        setRotation(updateRotation);\n        setViewerState({\n            file: viewerState.file,\n            pageIndex: currentPage,\n            pageHeight: pageHeight,\n            pageWidth: pageWidth,\n            rotation: updateRotation,\n            scale: scale,\n        });\n    };\n    var zoom = function (newScale) {\n        var pagesEle = pagesRef.current;\n        var currentState = stateRef.current;\n        if (!pagesEle || !currentState) {\n            return;\n        }\n        var updateScale = 1;\n        switch (newScale) {\n            case SpecialZoomLevel$1.ActualSize:\n                updateScale = 1;\n                break;\n            case SpecialZoomLevel$1.PageFit:\n                updateScale = Math.min((pagesEle.clientWidth - SCROLL_BAR_WIDTH) / pageWidth, (pagesEle.clientHeight - 2 * PAGE_PADDING) / pageHeight);\n                break;\n            case SpecialZoomLevel$1.PageWidth:\n                updateScale = (pagesEle.clientWidth - SCROLL_BAR_WIDTH) / pageWidth;\n                break;\n            default:\n                updateScale = newScale;\n                break;\n        }\n        setScale(updateScale);\n        onZoom({ doc: doc, scale: updateScale });\n    };\n    React.useEffect(function () {\n        var pagesEle = pagesRef.current;\n        var currentState = stateRef.current;\n        if (!pagesEle || !currentState) {\n            return;\n        }\n        pagesEle.scrollTop = pagesEle.scrollTop * scale / currentState.scale;\n        pagesEle.scrollLeft = pagesEle.scrollLeft * scale / currentState.scale;\n        setViewerState({\n            file: viewerState.file,\n            pageIndex: currentState.pageIndex,\n            pageHeight: pageHeight,\n            pageWidth: pageWidth,\n            rotation: rotation,\n            scale: scale,\n        });\n    }, [scale]);\n    var getPluginMethods = function () { return ({\n        getPagesRef: getPagesRef,\n        getViewerState: getViewerState,\n        jumpToDestination: jumpToDestination,\n        jumpToPage: jumpToPage,\n        openFile: openFile,\n        rotate: rotate,\n        setViewerState: setViewerState,\n        zoom: zoom,\n    }); };\n    React.useEffect(function () {\n        var pluginMethods = getPluginMethods();\n        plugins.forEach(function (plugin) {\n            if (plugin.install) {\n                plugin.install(pluginMethods);\n            }\n        });\n        return function () {\n            plugins.forEach(function (plugin) {\n                if (plugin.uninstall) {\n                    plugin.uninstall(pluginMethods);\n                }\n            });\n        };\n    }, []);\n    React.useEffect(function () {\n        onDocumentLoad({ doc: doc });\n        plugins.forEach(function (plugin) {\n            plugin.onDocumentLoad && plugin.onDocumentLoad({ doc: doc });\n        });\n        if (initialPage) {\n            jumpToPage(initialPage);\n        }\n    }, []);\n    React.useEffect(function () {\n        onPageChange({ currentPage: currentPage, doc: doc });\n        setViewerState({\n            file: viewerState.file,\n            pageIndex: currentPage,\n            pageHeight: pageHeight,\n            pageWidth: pageWidth,\n            rotation: rotation,\n            scale: scale,\n        });\n    }, [currentPage]);\n    React.useEffect(function () {\n        if (defaultScale) {\n            zoom(defaultScale);\n        }\n    }, []);\n    var pageVisibilityChanged = function (pageIndex, ratio) {\n        pageVisibility[pageIndex] = ratio;\n        var maxRatioPage = pageVisibility.reduce(function (maxIndex, item, index, array) {\n            return item > array[maxIndex] ? index : maxIndex;\n        }, 0);\n        setCurrentPage(maxRatioPage);\n    };\n    var executeNamedAction = function (action) {\n        var previousPage = currentPage - 1;\n        var nextPage = currentPage + 1;\n        switch (action) {\n            case 'FirstPage':\n                jumpToPage(0);\n                break;\n            case 'LastPage':\n                jumpToPage(numPages - 1);\n                break;\n            case 'NextPage':\n                (nextPage < numPages) && jumpToPage(nextPage);\n                break;\n            case 'PrevPage':\n                (previousPage >= 0) && jumpToPage(previousPage);\n                break;\n        }\n    };\n    var renderViewer = function () {\n        var slot = {\n            attrs: {\n                ref: containerRef,\n                style: {\n                    height: '100%',\n                },\n            },\n            children: React__default['default'].createElement(React__default['default'].Fragment, null),\n            subSlot: {\n                attrs: {\n                    ref: pagesRef,\n                    style: {\n                        height: '100%',\n                        overflow: 'auto',\n                        position: 'relative',\n                    },\n                },\n                children: (React__default['default'].createElement(React__default['default'].Fragment, null, Array(numPages).fill(0).map(function (_, index) {\n                    return (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-inner-page\", key: \"pagelayer-\" + index, ref: function (ref) {\n                            pageRefs[index].current = ref;\n                        } },\n                        React__default['default'].createElement(PageLayer, { currentPage: currentPage, doc: doc, height: pageHeight, pageIndex: index, plugins: plugins, renderPage: renderPage, rotation: rotation, scale: scale, width: pageWidth, onExecuteNamedAction: executeNamedAction, onJumpToDest: jumpToDestination, onPageVisibilityChanged: pageVisibilityChanged })));\n                }))),\n            },\n        };\n        plugins.forEach(function (plugin) {\n            if (plugin.renderViewer) {\n                slot = plugin.renderViewer({\n                    containerRef: containerRef,\n                    doc: doc,\n                    pageHeight: pageHeight,\n                    pageWidth: pageWidth,\n                    rotation: rotation,\n                    slot: slot,\n                    jumpToPage: jumpToPage,\n                    openFile: openFile,\n                    rotate: rotate,\n                    zoom: zoom,\n                });\n            }\n        });\n        return slot;\n    };\n    var renderSlot = function (slot) { return (React__default['default'].createElement(\"div\", __assign({}, slot.attrs, { style: slot.attrs && slot.attrs.style ? slot.attrs.style : {} }),\n        slot.children,\n        slot.subSlot && renderSlot(slot.subSlot))); };\n    return renderSlot(renderViewer());\n};\n\nvar LEVELS = [\n    0.1,\n    0.2,\n    0.3,\n    0.4,\n    0.5,\n    0.6,\n    0.7,\n    0.8,\n    0.9,\n    1,\n    1.1,\n    1.3,\n    1.5,\n    1.7,\n    1.9,\n    2.1,\n    2.4,\n    2.7,\n    3.0,\n    3.3,\n    3.7,\n    4.1,\n    4.6,\n    5.1,\n    5.7,\n    6.3,\n    7.0,\n    7.7,\n    8.5,\n    9.4,\n    10,\n];\nvar decrease = function (currentLevel) {\n    var found = LEVELS.findIndex(function (item) { return item >= currentLevel; });\n    return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar PageSizeCalculator = function (_a) {\n    var doc = _a.doc, render = _a.render;\n    var theme = React.useContext(ThemeContext);\n    var pagesRef = React.useRef(null);\n    var _b = React.useState({\n        pageHeight: 0,\n        pageWidth: 0,\n        scale: 1,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    React.useEffect(function () {\n        doc.getPage(1).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            var w = viewport.width;\n            var h = viewport.height;\n            var pagesEle = pagesRef.current;\n            if (!pagesEle) {\n                return;\n            }\n            var scaled = (pagesEle.clientWidth - 2 * 50) / w;\n            var scale = decrease(Math.max(1, scaled));\n            setPageSize({\n                pageHeight: h,\n                pageWidth: w,\n                scale: scale,\n            });\n        });\n    }, [doc]);\n    var pageWidth = pageSize.pageWidth;\n    return (pageWidth === 0\n        ? (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-page-size-calculator\", ref: pagesRef },\n            React__default['default'].createElement(Spinner, null)))\n        : render(pageSize));\n};\n\nvar LoadingStatus = (function () {\n    function LoadingStatus() {\n    }\n    return LoadingStatus;\n}());\n\nvar AskForPasswordState = (function (_super) {\n    __extends(AskForPasswordState, _super);\n    function AskForPasswordState(verifyPasswordFn) {\n        var _this = _super.call(this) || this;\n        _this.verifyPasswordFn = verifyPasswordFn;\n        return _this;\n    }\n    return AskForPasswordState;\n}(LoadingStatus));\n\nvar AskingPassword = function (_a) {\n    var verifyPasswordFn = _a.verifyPasswordFn;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(''), password = _b[0], setPassword = _b[1];\n    var changePassword = function (e) { return setPassword(e.target.value); };\n    var submit = function () { return verifyPasswordFn(password); };\n    return (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-asking-password\" },\n        React__default['default'].createElement(\"div\", null,\n            React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-asking-password-message\" },\n                l10n.core.askingPassword.requirePasswordToOpen,\n                \":\"),\n            React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-asking-password-input-container\" },\n                React__default['default'].createElement(\"input\", { className: theme.prefixClass + \"-asking-password-input\", type: \"password\", onChange: changePassword }),\n                React__default['default'].createElement(\"button\", { className: theme.prefixClass + \"-asking-password-button\", onClick: submit }, l10n.core.askingPassword.submit)))));\n};\n\nvar CompletedState = (function (_super) {\n    __extends(CompletedState, _super);\n    function CompletedState(doc) {\n        var _this = _super.call(this) || this;\n        _this.doc = doc;\n        return _this;\n    }\n    return CompletedState;\n}(LoadingStatus));\n\nvar FailureState = (function (_super) {\n    __extends(FailureState, _super);\n    function FailureState(error) {\n        var _this = _super.call(this) || this;\n        _this.error = error;\n        return _this;\n    }\n    return FailureState;\n}(LoadingStatus));\n\nvar LoadingState = (function (_super) {\n    __extends(LoadingState, _super);\n    function LoadingState(percentages) {\n        var _this = _super.call(this) || this;\n        _this.percentages = percentages;\n        return _this;\n    }\n    return LoadingState;\n}(LoadingStatus));\n\nvar WrongPassword = function (_a) {\n    var verifyPasswordFn = _a.verifyPasswordFn;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(''), password = _b[0], setPassword = _b[1];\n    var changePassword = function (e) { return setPassword(e.target.value); };\n    var submit = function () { return verifyPasswordFn(password); };\n    return (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-asking-password\" },\n        React__default['default'].createElement(\"div\", null,\n            React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-asking-password-message\" },\n                l10n.core.wrongPassword.tryAgain,\n                \":\"),\n            React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-asking-password-input-container\" },\n                React__default['default'].createElement(\"input\", { className: theme.prefixClass + \"-asking-password-input\", type: \"password\", onChange: changePassword }),\n                React__default['default'].createElement(\"button\", { className: theme.prefixClass + \"-asking-password-button\", onClick: submit }, l10n.core.wrongPassword.submit)))));\n};\n\nvar WrongPasswordState = (function (_super) {\n    __extends(WrongPasswordState, _super);\n    function WrongPasswordState(verifyPasswordFn) {\n        var _this = _super.call(this) || this;\n        _this.verifyPasswordFn = verifyPasswordFn;\n        return _this;\n    }\n    return WrongPasswordState;\n}(LoadingStatus));\n\nvar DocumentLoader = function (_a) {\n    var authorization = _a.authorization, characterMap = _a.characterMap, file = _a.file, httpHeaders = _a.httpHeaders, render = _a.render, renderError = _a.renderError, renderLoader = _a.renderLoader;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(new LoadingState(0)), status = _b[0], setStatus = _b[1];\n    var _c = React.useState(0), percentages = _c[0], setPercentages = _c[1];\n    var _d = React.useState(null), loadedDocument = _d[0], setLoadedDocument = _d[1];\n    React.useEffect(function () {\n        setStatus(new LoadingState(0));\n        var params = Object.assign({}, ('string' === typeof file) ? { url: file } : { data: file }, characterMap ? { cMapUrl: characterMap.url, cMapPacked: characterMap.isCompressed } : {});\n        if (authorization) {\n            params.withCredentials = true;\n            if (httpHeaders) {\n                params.httpHeaders = httpHeaders;\n                if (!params.httpHeaders['Authorization']) {\n                    params.httpHeaders['Authorization'] = authorization;\n                }\n            }\n            else {\n                params.httpHeaders = {\n                    'Authorization': authorization,\n                };\n            }\n        }\n        var loadingTask = PdfJs__namespace.getDocument(params);\n        loadingTask.onPassword = function (verifyPassword, reason) {\n            switch (reason) {\n                case PdfJs__namespace.PasswordResponses.NEED_PASSWORD:\n                    setStatus(new AskForPasswordState(verifyPassword));\n                    break;\n                case PdfJs__namespace.PasswordResponses.INCORRECT_PASSWORD:\n                    setStatus(new WrongPasswordState(verifyPassword));\n                    break;\n            }\n        };\n        loadingTask.onProgress = function (progress) {\n            progress.total > 0\n                ? setPercentages(Math.min(100, 100 * progress.loaded / progress.total))\n                : setPercentages(100);\n        };\n        loadingTask.promise.then(function (doc) { return setLoadedDocument(doc); }, function (err) { return setStatus(new FailureState({\n            message: err.message || 'Cannot load document',\n            name: err.name,\n        })); });\n        return function () {\n            loadingTask.destroy();\n        };\n    }, [file]);\n    React.useEffect(function () {\n        (percentages === 100 && loadedDocument)\n            ? setStatus(new CompletedState(loadedDocument))\n            : setStatus(new LoadingState(percentages));\n    }, [percentages, loadedDocument]);\n    switch (true) {\n        case (status instanceof AskForPasswordState):\n            return React__default['default'].createElement(AskingPassword, { verifyPasswordFn: status.verifyPasswordFn });\n        case (status instanceof WrongPasswordState):\n            return React__default['default'].createElement(WrongPassword, { verifyPasswordFn: status.verifyPasswordFn });\n        case (status instanceof CompletedState):\n            return render(status.doc);\n        case (status instanceof FailureState):\n            return renderError\n                ? renderError(status.error)\n                : (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-doc-error\" },\n                    React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-doc-error-text\" }, status.error.message)));\n        case (status instanceof LoadingState):\n            return (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-doc-loading\" }, renderLoader ? renderLoader(status.percentages) : React__default['default'].createElement(Spinner, null)));\n        default:\n            return (React__default['default'].createElement(\"div\", { className: theme.prefixClass + \"-doc-loading\" },\n                React__default['default'].createElement(Spinner, null)));\n    }\n};\n\nvar ThemeProvider = function (_a) {\n    var children = _a.children, prefixClass = _a.prefixClass;\n    return (React__default['default'].createElement(ThemeContext.Provider, { value: { prefixClass: prefixClass || 'rpv-core' } }, children));\n};\n\nvar Viewer = function (_a) {\n    var _b = _a.authorization, authorization = _b === void 0 ? '' : _b, characterMap = _a.characterMap, defaultScale = _a.defaultScale, fileUrl = _a.fileUrl, httpHeaders = _a.httpHeaders, _c = _a.initialPage, initialPage = _c === void 0 ? 0 : _c, localization = _a.localization, _d = _a.plugins, plugins = _d === void 0 ? [] : _d, prefixClass = _a.prefixClass, renderError = _a.renderError, renderPage = _a.renderPage, renderLoader = _a.renderLoader, _e = _a.onDocumentLoad, onDocumentLoad = _e === void 0 ? function () { } : _e, _f = _a.onPageChange, onPageChange = _f === void 0 ? function () { } : _f, _g = _a.onZoom, onZoom = _g === void 0 ? function () { } : _g;\n    var _h = React.useState({\n        data: fileUrl,\n        name: (typeof fileUrl === 'string') ? fileUrl : '',\n    }), file = _h[0], setFile = _h[1];\n    var openFile = function (fileName, data) {\n        setFile({\n            data: data,\n            name: fileName,\n        });\n    };\n    React.useEffect(function () {\n        setFile({\n            data: fileUrl,\n            name: (typeof fileUrl === 'string') ? fileUrl : '',\n        });\n    }, [fileUrl]);\n    return (React__default['default'].createElement(ThemeProvider, { prefixClass: prefixClass },\n        React__default['default'].createElement(LocalizationProvider, { localization: localization }, function (_) { return (React__default['default'].createElement(DocumentLoader, { authorization: authorization, characterMap: characterMap, file: file.data, httpHeaders: httpHeaders, render: function (doc) { return (React__default['default'].createElement(PageSizeCalculator, { doc: doc, render: function (ps) { return (React__default['default'].createElement(Inner, { defaultScale: defaultScale, doc: doc, initialPage: initialPage, pageSize: ps, plugins: plugins, renderPage: renderPage, viewerState: {\n                        file: file,\n                        pageIndex: initialPage,\n                        pageHeight: ps.pageHeight,\n                        pageWidth: ps.pageWidth,\n                        rotation: 0,\n                        scale: ps.scale,\n                    }, onDocumentLoad: onDocumentLoad, onOpenFile: openFile, onPageChange: onPageChange, onZoom: onZoom })); } })); }, renderError: renderError, renderLoader: renderLoader })); })));\n};\n\nvar Worker = function (_a) {\n    var children = _a.children, workerUrl = _a.workerUrl;\n    PdfJs__namespace.GlobalWorkerOptions.workerSrc = workerUrl;\n    return React__default['default'].createElement(React__default['default'].Fragment, null, children);\n};\n\nexports.AnnotationType = AnnotationType$1;\nexports.Button = Button;\nexports.Icon = Icon;\nexports.LayerRenderStatus = LayerRenderStatus$1;\nexports.LocalizationContext = LocalizationContext;\nexports.LocalizationProvider = LocalizationProvider;\nexports.Menu = Menu;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.Modal = Modal;\nexports.Observer = Observer;\nexports.Popover = Popover;\nexports.Position = Position$1;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.Separator = Separator;\nexports.SpecialZoomLevel = SpecialZoomLevel$1;\nexports.Spinner = Spinner;\nexports.Tooltip = Tooltip;\nexports.Viewer = Viewer;\nexports.Worker = Worker;\nexports.createStore = createStore;\n"]},"metadata":{},"sourceType":"script"}