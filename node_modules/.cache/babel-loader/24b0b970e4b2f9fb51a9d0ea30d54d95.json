{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar core = require('@react-pdf-viewer/core');\n\nfunction _interopDefaultLegacy(e) {\n  return e && typeof e === 'object' && 'default' in e ? e : {\n    'default': e\n  };\n}\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nvar BookmarkItem = function (_a) {\n  var bookmark = _a.bookmark,\n      depth = _a.depth,\n      doc = _a.doc,\n      onClick = _a.onClick,\n      onJumpToDest = _a.onJumpToDest;\n  var toggleRef = React.createRef();\n  var subItemRef = React.createRef();\n  var subItemsDisplayed = React.useRef(true);\n  var hasSubItems = bookmark.items && bookmark.items.length > 0;\n\n  var toggleSubItems = function () {\n    subItemsDisplayed.current = !subItemsDisplayed.current;\n    var subItemsEle = subItemRef.current;\n    var toggleEle = toggleRef.current;\n\n    if (!subItemsEle || !toggleEle) {\n      return;\n    }\n\n    subItemsEle.style.display = subItemsDisplayed.current ? 'block' : 'none';\n    toggleEle.classList.toggle('rpv-bookmark-toggle-expanded');\n  };\n\n  var clickBookmak = function () {\n    if (hasSubItems && bookmark.dest) {\n      onClick(bookmark.dest);\n    }\n  };\n\n  var clickItem = function () {\n    if (!hasSubItems && bookmark.dest) {\n      onClick(bookmark.dest);\n    }\n  };\n\n  return React__default['default'].createElement(React__default['default'].Fragment, null, React__default['default'].createElement(\"div\", {\n    className: 'rpv-bookmark-item',\n    style: {\n      paddingLeft: depth * 20 + 4 + \"px\"\n    },\n    onClick: clickItem\n  }, hasSubItems && React__default['default'].createElement(\"span\", {\n    ref: toggleRef,\n    className: 'rpv-bookmark-toggle',\n    onClick: toggleSubItems\n  }, \"\\u25BA\"), bookmark.url ? React__default['default'].createElement(\"a\", {\n    className: 'rpv-bookmark-title',\n    href: bookmark.url,\n    rel: 'noopener noreferrer nofollow',\n    target: bookmark.newWindow ? '_blank' : ''\n  }, bookmark.title) : React__default['default'].createElement(\"div\", {\n    className: 'rpv-bookmark-title',\n    onClick: clickBookmak\n  }, bookmark.title)), hasSubItems && React__default['default'].createElement(\"div\", {\n    ref: subItemRef\n  }, React__default['default'].createElement(BookmarkList, {\n    bookmarks: bookmark.items,\n    depth: depth + 1,\n    doc: doc,\n    onJumpToDest: onJumpToDest\n  })));\n};\n\nvar parse = function (pageIndex, destArray) {\n  var bottomOffset;\n  var scale;\n\n  switch (destArray[1].name) {\n    case 'XYZ':\n      bottomOffset = destArray[3];\n      scale = destArray[4];\n      return {\n        bottomOffset: bottomOffset,\n        pageIndex: pageIndex - 1,\n        scaleTo: scale\n      };\n\n    case 'Fit':\n      return {\n        bottomOffset: 0,\n        pageIndex: pageIndex - 1,\n        scaleTo: core.SpecialZoomLevel.PageFit\n      };\n\n    default:\n      return {\n        bottomOffset: 0,\n        pageIndex: pageIndex - 1,\n        scaleTo: 1\n      };\n  }\n};\n\nvar getDestination = function (doc, dest) {\n  return new Promise(function (res) {\n    new Promise(function (resolve) {\n      if (typeof dest === 'string') {\n        doc.getDestination(dest).then(function (destArray) {\n          resolve(destArray);\n        });\n      } else {\n        resolve(dest);\n      }\n    }).then(function (destArray) {\n      doc.getPageIndex(destArray[0]).then(function (pageIndex) {\n        var target = parse(pageIndex, destArray);\n        res(target);\n      });\n    });\n  });\n};\n\nvar BookmarkList = function (_a) {\n  var bookmarks = _a.bookmarks,\n      _b = _a.depth,\n      depth = _b === void 0 ? 0 : _b,\n      doc = _a.doc,\n      onJumpToDest = _a.onJumpToDest;\n\n  var jumpToDest = function (dest) {\n    getDestination(doc, dest).then(function (target) {\n      var pageIndex = target.pageIndex,\n          bottomOffset = target.bottomOffset,\n          scaleTo = target.scaleTo;\n      onJumpToDest(pageIndex + 1, bottomOffset, scaleTo);\n    });\n  };\n\n  return React__default['default'].createElement(\"ul\", {\n    className: 'rpv-bookmark-list'\n  }, bookmarks.map(function (bookmark, index) {\n    return React__default['default'].createElement(\"li\", {\n      key: index\n    }, React__default['default'].createElement(BookmarkItem, {\n      bookmark: bookmark,\n      depth: depth,\n      doc: doc,\n      onClick: jumpToDest,\n      onJumpToDest: onJumpToDest\n    }));\n  }));\n};\n\nvar BookmarkLoader = function (_a) {\n  var doc = _a.doc,\n      onJumpToDest = _a.onJumpToDest;\n  var l10n = React.useContext(core.LocalizationContext);\n\n  var _b = React.useState({\n    isLoaded: false,\n    items: []\n  }),\n      bookmarks = _b[0],\n      setBookmarks = _b[1];\n\n  React.useEffect(function () {\n    setBookmarks({\n      isLoaded: false,\n      items: []\n    });\n    doc.getOutline().then(function (outline) {\n      setBookmarks({\n        isLoaded: true,\n        items: outline || []\n      });\n    });\n  }, [doc]);\n  return !bookmarks.isLoaded ? React__default['default'].createElement(core.Spinner, null) : bookmarks.items.length === 0 ? React__default['default'].createElement(\"div\", {\n    className: 'rpv-bookmark-empty'\n  }, l10n && l10n.bookmark ? l10n.bookmark.noBookmark : 'There is no bookmark') : React__default['default'].createElement(BookmarkList, {\n    bookmarks: bookmarks.items,\n    depth: 0,\n    doc: doc,\n    onJumpToDest: onJumpToDest\n  });\n};\n\nvar BookmarkListWithStore = function (_a) {\n  var store = _a.store;\n\n  var _b = React.useState(store.get('doc')),\n      currentDoc = _b[0],\n      setCurrentDoc = _b[1];\n\n  var handleDocumentChanged = function (doc) {\n    setCurrentDoc(doc);\n  };\n\n  var jump = function (pageIndex, bottomOffset, scaleTo) {\n    var jumpToDestination = store.get('jumpToDestination');\n\n    if (jumpToDestination) {\n      jumpToDestination(pageIndex, bottomOffset, 0, scaleTo);\n    }\n  };\n\n  React.useEffect(function () {\n    store.subscribe('doc', handleDocumentChanged);\n    return function () {\n      store.unsubscribe('doc', handleDocumentChanged);\n    };\n  }, []);\n  return currentDoc ? React__default['default'].createElement(BookmarkLoader, {\n    doc: currentDoc,\n    onJumpToDest: jump\n  }) : React__default['default'].createElement(\"div\", {\n    className: 'rpv-bookmark-list-loader'\n  }, React__default['default'].createElement(core.Spinner, null));\n};\n\nvar bookmarkPlugin = function () {\n  var store = core.createStore({});\n\n  var BookmarksDecorator = function () {\n    return React__default['default'].createElement(BookmarkListWithStore, {\n      store: store\n    });\n  };\n\n  return {\n    install: function (pluginFunctions) {\n      store.update('jumpToDestination', pluginFunctions.jumpToDestination);\n    },\n    onDocumentLoad: function (props) {\n      store.update('doc', props.doc);\n    },\n    Bookmarks: BookmarksDecorator\n  };\n};\n\nexports.bookmarkPlugin = bookmarkPlugin;","map":{"version":3,"sources":["/Users/phipson/Documents/GitProjects/phipson.github.io/webv5/node_modules/@react-pdf-viewer/bookmark/lib/cjs/bookmark.js"],"names":["Object","defineProperty","exports","value","React","require","core","_interopDefaultLegacy","e","React__default","BookmarkItem","_a","bookmark","depth","doc","onClick","onJumpToDest","toggleRef","createRef","subItemRef","subItemsDisplayed","useRef","hasSubItems","items","length","toggleSubItems","current","subItemsEle","toggleEle","style","display","classList","toggle","clickBookmak","dest","clickItem","createElement","Fragment","className","paddingLeft","ref","url","href","rel","target","newWindow","title","BookmarkList","bookmarks","parse","pageIndex","destArray","bottomOffset","scale","name","scaleTo","SpecialZoomLevel","PageFit","getDestination","Promise","res","resolve","then","getPageIndex","_b","jumpToDest","map","index","key","BookmarkLoader","l10n","useContext","LocalizationContext","useState","isLoaded","setBookmarks","useEffect","getOutline","outline","Spinner","noBookmark","BookmarkListWithStore","store","get","currentDoc","setCurrentDoc","handleDocumentChanged","jump","jumpToDestination","subscribe","unsubscribe","bookmarkPlugin","createStore","BookmarksDecorator","install","pluginFunctions","update","onDocumentLoad","props","Bookmarks"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar React = require('react');\nvar core = require('@react-pdf-viewer/core');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nvar BookmarkItem = function (_a) {\n    var bookmark = _a.bookmark, depth = _a.depth, doc = _a.doc, onClick = _a.onClick, onJumpToDest = _a.onJumpToDest;\n    var toggleRef = React.createRef();\n    var subItemRef = React.createRef();\n    var subItemsDisplayed = React.useRef(true);\n    var hasSubItems = bookmark.items && bookmark.items.length > 0;\n    var toggleSubItems = function () {\n        subItemsDisplayed.current = !subItemsDisplayed.current;\n        var subItemsEle = subItemRef.current;\n        var toggleEle = toggleRef.current;\n        if (!subItemsEle || !toggleEle) {\n            return;\n        }\n        subItemsEle.style.display = subItemsDisplayed.current ? 'block' : 'none';\n        toggleEle.classList.toggle('rpv-bookmark-toggle-expanded');\n    };\n    var clickBookmak = function () {\n        if (hasSubItems && bookmark.dest) {\n            onClick(bookmark.dest);\n        }\n    };\n    var clickItem = function () {\n        if (!hasSubItems && bookmark.dest) {\n            onClick(bookmark.dest);\n        }\n    };\n    return (React__default['default'].createElement(React__default['default'].Fragment, null,\n        React__default['default'].createElement(\"div\", { className: 'rpv-bookmark-item', style: {\n                paddingLeft: depth * 20 + 4 + \"px\",\n            }, onClick: clickItem },\n            hasSubItems && (React__default['default'].createElement(\"span\", { ref: toggleRef, className: 'rpv-bookmark-toggle', onClick: toggleSubItems }, \"\\u25BA\")),\n            bookmark.url\n                ? (React__default['default'].createElement(\"a\", { className: 'rpv-bookmark-title', href: bookmark.url, rel: 'noopener noreferrer nofollow', target: bookmark.newWindow ? '_blank' : '' }, bookmark.title))\n                : (React__default['default'].createElement(\"div\", { className: 'rpv-bookmark-title', onClick: clickBookmak }, bookmark.title))),\n        hasSubItems && (React__default['default'].createElement(\"div\", { ref: subItemRef },\n            React__default['default'].createElement(BookmarkList, { bookmarks: bookmark.items, depth: depth + 1, doc: doc, onJumpToDest: onJumpToDest })))));\n};\n\nvar parse = function (pageIndex, destArray) {\n    var bottomOffset;\n    var scale;\n    switch (destArray[1].name) {\n        case 'XYZ':\n            bottomOffset = destArray[3];\n            scale = destArray[4];\n            return {\n                bottomOffset: bottomOffset,\n                pageIndex: pageIndex - 1,\n                scaleTo: scale,\n            };\n        case 'Fit':\n            return {\n                bottomOffset: 0,\n                pageIndex: pageIndex - 1,\n                scaleTo: core.SpecialZoomLevel.PageFit,\n            };\n        default:\n            return {\n                bottomOffset: 0,\n                pageIndex: pageIndex - 1,\n                scaleTo: 1,\n            };\n    }\n};\nvar getDestination = function (doc, dest) {\n    return new Promise(function (res) {\n        new Promise(function (resolve) {\n            if (typeof dest === 'string') {\n                doc.getDestination(dest).then(function (destArray) {\n                    resolve(destArray);\n                });\n            }\n            else {\n                resolve(dest);\n            }\n        }).then(function (destArray) {\n            doc.getPageIndex(destArray[0]).then(function (pageIndex) {\n                var target = parse(pageIndex, destArray);\n                res(target);\n            });\n        });\n    });\n};\n\nvar BookmarkList = function (_a) {\n    var bookmarks = _a.bookmarks, _b = _a.depth, depth = _b === void 0 ? 0 : _b, doc = _a.doc, onJumpToDest = _a.onJumpToDest;\n    var jumpToDest = function (dest) {\n        getDestination(doc, dest).then(function (target) {\n            var pageIndex = target.pageIndex, bottomOffset = target.bottomOffset, scaleTo = target.scaleTo;\n            onJumpToDest(pageIndex + 1, bottomOffset, scaleTo);\n        });\n    };\n    return (React__default['default'].createElement(\"ul\", { className: 'rpv-bookmark-list' }, bookmarks.map(function (bookmark, index) {\n        return (React__default['default'].createElement(\"li\", { key: index },\n            React__default['default'].createElement(BookmarkItem, { bookmark: bookmark, depth: depth, doc: doc, onClick: jumpToDest, onJumpToDest: onJumpToDest })));\n    })));\n};\n\nvar BookmarkLoader = function (_a) {\n    var doc = _a.doc, onJumpToDest = _a.onJumpToDest;\n    var l10n = React.useContext(core.LocalizationContext);\n    var _b = React.useState({\n        isLoaded: false,\n        items: [],\n    }), bookmarks = _b[0], setBookmarks = _b[1];\n    React.useEffect(function () {\n        setBookmarks({\n            isLoaded: false,\n            items: [],\n        });\n        doc.getOutline().then(function (outline) {\n            setBookmarks({\n                isLoaded: true,\n                items: outline || [],\n            });\n        });\n    }, [doc]);\n    return (!bookmarks.isLoaded\n        ? React__default['default'].createElement(core.Spinner, null)\n        : (bookmarks.items.length === 0\n            ? React__default['default'].createElement(\"div\", { className: 'rpv-bookmark-empty' }, l10n && l10n.bookmark ? l10n.bookmark.noBookmark : 'There is no bookmark')\n            : (React__default['default'].createElement(BookmarkList, { bookmarks: bookmarks.items, depth: 0, doc: doc, onJumpToDest: onJumpToDest }))));\n};\n\nvar BookmarkListWithStore = function (_a) {\n    var store = _a.store;\n    var _b = React.useState(store.get('doc')), currentDoc = _b[0], setCurrentDoc = _b[1];\n    var handleDocumentChanged = function (doc) {\n        setCurrentDoc(doc);\n    };\n    var jump = function (pageIndex, bottomOffset, scaleTo) {\n        var jumpToDestination = store.get('jumpToDestination');\n        if (jumpToDestination) {\n            jumpToDestination(pageIndex, bottomOffset, 0, scaleTo);\n        }\n    };\n    React.useEffect(function () {\n        store.subscribe('doc', handleDocumentChanged);\n        return function () {\n            store.unsubscribe('doc', handleDocumentChanged);\n        };\n    }, []);\n    return (currentDoc\n        ? (React__default['default'].createElement(BookmarkLoader, { doc: currentDoc, onJumpToDest: jump }))\n        : React__default['default'].createElement(\"div\", { className: 'rpv-bookmark-list-loader' },\n            React__default['default'].createElement(core.Spinner, null)));\n};\n\nvar bookmarkPlugin = function () {\n    var store = core.createStore({});\n    var BookmarksDecorator = function () { return (React__default['default'].createElement(BookmarkListWithStore, { store: store })); };\n    return {\n        install: function (pluginFunctions) {\n            store.update('jumpToDestination', pluginFunctions.jumpToDestination);\n        },\n        onDocumentLoad: function (props) {\n            store.update('doc', props.doc);\n        },\n        Bookmarks: BookmarksDecorator,\n    };\n};\n\nexports.bookmarkPlugin = bookmarkPlugin;\n"]},"metadata":{},"sourceType":"script"}